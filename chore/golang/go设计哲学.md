https://qiankunli.github.io/2021/10/27/go_philosophy.html
https://mp.weixin.qq.com/s/Ca72d8-A0UoiIv-EquT8rA

- Go 是在 Google 建立大规模分布式系统的经验中产生的
- 禁止循环导入，减少编译器的复杂度
- 解决`多核CPU能力的充分利用`是创建 Go 的主要动机之一

- 重视工程软件项目的`整体环境`：
  容易并发、明确的依赖关系、可扩展的开发和生产、安全的程序、简单的部署、自动代码格式化、工具辅助开发

---

go 设计哲学

- 前言
  1. 匿名函数消掉了很多类，大部分可以塞到一个 struct 里，十个八个 struct 就能实现一个 功能还算复杂的框架
  2. 不要按照面向对象的思维去写 Go 代码。起一个 xxFactory 等面向对象意义的名字，真的让人很错乱。
- 流派
  1. Go 语言在吸收众多流派精华的基础上，开创了自己独特的编程风格：
     `一种基于连接与组合的语言`
     连接，指的是组件的耦合方式，也就是组件是如何被串联起来的。非侵入式的 interface，抽象的 io.Reader,io.Writer 和 pipe
     组合，是形成复合对象的基础。连接与组合都是语言中非常平凡的概念，但 Go 语言恰恰是在平凡之中见神奇。匿名组合、指针组合、接口组合。
- 组合
  Go 设计者为开发者们提供了正交的语法元素：一座座没有关联的“孤岛”
  组合原则的应用实质上是塑造了 Go 程序的骨架结构

  1. Type Embedding 语法糖
     被嵌入的类型和新类型两者之间`没有任何关系`，甚至相互完全不知道对方的存在，更没有经典面向对象语言中的那种父类、子类的关系，以及向上、向下转型（Type Casting）
     例如：mutex 嵌入

  2. 标准库通过嵌入接口类型的方式来实现接口行为的聚合，组成大接口
     比如很多 tcp 的网络库会基于 net.Conn 提供自己的 Conn strurt。框架能力就是通过 “嵌入”层层堆叠起来的，这也是我们理解 go 框架的突破口。
     ```go
      type Conn interface {
          net.Conn
          Reader
          Writer
      }
     ```

- 并发
  1. 语法层面的并发原语支持
     在提供了开销较低的 goroutine 的同时，Go 还在语言层面内置了辅助并发设计的原语：channel 和 select
  2. 并发与组合的哲学是一脉相承的，并发是一个更大的组合的概念
- 鸭子类型和小接口
  Go 语言之父 Rob Pike 说过`“接口越大，抽象程度越弱”`。
  `越偏向业务层，抽象难度就越高`。所以 Go 标准库小接口（1~3 个方法）占比略高于 Docker 和 Kubernetes 的原因。
  接口由使用方按需定义，而不用事前规划

  与常见编程语言的不同之处：

  1. 非侵入式接口(隐式)
  2. 接口是非侵入性的/鸭子类型， 实现不需要依赖接口定义
  3. 不支持 “继承“
  4. 倾向于使用小的接口定义， 很多接口只包含一个方法。较大的接口定义，可以由多个小接口定义组合而成
     `避免接口和实现之间的显式关联`，允许 Go 程序员定义小型、灵活以及临时性的接口，而不是将它们作为复杂类型层次结构的基础构件。它鼓励捕捉开发过程中出现的关系和操作，而不是需要提前计划和定义它们。
     初次学习 Go 的开发者常常担心一个类型会意外地实现一个接口。虽然很容易建立起这样的假设，但在实践中，`不太可能为两个不兼容的操作选择相同的名称和签名，而且我们从未在实际的 Go 程序中看到这种情况发生`。
     刚开始开发时，最终的结构更加难以看清
     一段程序确定的逻辑写成代码，`不确定的逻辑留出 interface，自由实现和扩展。从这个视角看，interface 是扩展的手段，而不是在设计阶段就充分使用`
     一般由调用方定义接口（只有调用方知道使用什么方法，interface 按调用方需要定义）
     一般用 `var _ Interface = (*Type)(nil)` 来检查接口是否实现

- 不得不提的面向对象
  完全面向对象设计就是一刀切的宗教式的设计，但其并不能很好的表述这个世界，这就导致其表现力不足，最后通过设计模式和面向切面等设计技巧来弥补语言方面的缺陷
  **类表示单个事物还可以，一旦表示多个事物及其交互，其表现力也就会遇到各种挑战**
  go 是`面向工程的实用主义者`，其糅合了面向对象的设计，函数式设计和过程式设计的优点；原来通过各种设计模式的设计通过函数、接口、组合等简单方式就搞定了；go 有更多胶水的东西比如：全局变量、常量，函数，闭包等等，可以轻松的的把模块衔接和驱动起来
  - 《Go codding in java way》
    不要尝试在 golang 中用面向对象的方法写你的业务代码。现在是微服务当道的年代，`服务已经代替了类成为主要的建模工具`，现在很少关注一个服务里面是不是按照 ddd 拆分的，类是贫血的还是充血的，接到的业务代码最后都写成了 pipeline。
- 其它

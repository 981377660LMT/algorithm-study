# 类型反馈的精确化：消除不必要的 Stub 生成

# V8 release v3.11: Accurate type feedback

### 1. 减少代码膨胀

在早期的 V8 中，为了应对属性访问，会生成大量的 **Code Stubs**（一段专门用于该特定对象形状的机器码）。
v3.11 优化了 Stub 的生成逻辑，通过更精确的类型反馈（Type Feedback），合并了那些布局高度相似的隐藏类对应的机器码片段。这不仅节省了内存，还提高了指令缓存（I-cache）的命中率。

### 2. `Array.concat` 的快路径

针对数组拼接操作，如果源数组都是 `Smi_elements`（整数数组），V8 直接执行底层的内存拷贝（Memcpy），而不再走高层的迭代逻辑。

### 3. 一针见血的见解

代码执行效率不仅取决于指令本身，更取决于对 CPU 缓存的友好程度。通过减少不必要的机器码冗余，V8 让 CPU 能够更轻松地“预测”代码流。这一改动再次突显了 V8 团队对系统底层特性的敬畏。

# 新生代的守门人：写屏障与内存屏障

# V8 release v3.20: Scavenger refactoring and Write Barriers

### 1. 新生代 GC 的极限压榨

针对 **Scavenger**（新生代回收器）进行了底层重构。
优化了对象从 From-space 复制到 To-space 的逻辑。V8 将这个操作内联（Inline）到分配代码中，利用更紧凑的汇编代码序列来执行内存移动，极大地提升了处理海量小对象时的吞吐量。

### 2. 写屏障（Write Barrier）优化

写屏障是追踪“老生代对象指向新生代对象”引用关系的核心机制。v3.20 通过在 **Hydrogen IR** 中减少冗余的屏障检测，降低了每次对象属性赋值时的额外指令开销。

### 3. 一针见血的见解

新生代回收是 Web 应用中最频繁的后台动作。V8 对写屏障的极限压榨，本质上是在为所有的对象存取操作“减重”。每一个字节的指令减少，累积起来就是 JS 引擎在高压力分配下的韧性提升。

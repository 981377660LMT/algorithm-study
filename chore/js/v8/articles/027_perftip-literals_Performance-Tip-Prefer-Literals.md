# 声明式布局：为什么字面量永远滴神？

# Performance Tip: Prefer Literals

这篇博文解释了一个核心问题：为什么 `[]` 比 `new Array()` 快？

### 1. 样板对象 (Boilerplate)

字面量允许 V8 在编译期创建一个 **Boilerplate** 对象。
当代码执行到 `[]` 时，V8 只需利用极其廉价的 **CloneIC** 快速拷贝这个样板对象的内存布局和隐藏类。而执行 `new Array()` 时，引擎必须经历完整的构造函数查找（可能会被全局覆盖）、动态参数评估和内存重新分配，路径极其冗长。

### 2. 类型预测与隐藏类

使用字面量可以让 V8 提前知道对象的“形状”。如果你定义 `{a:1, b:2}`，V8 会立即分配一个已经包含这些属性位移的隐藏类，而不需要在后续的一系列赋值中频繁触发 **Hidden Class Transitions**。

### 3. 一针见血的见解

**字面量是声明式的布局预测**，而构造函数是命令式的内存开辟。计算机科学的老生常谈依然适用：引擎永远偏爱在执行前就已经知道结果的事物。

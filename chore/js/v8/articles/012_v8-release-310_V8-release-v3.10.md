# 编译器的博弈：自适应 JIT 的飞跃

# V8 release v3.10: Adaptive JIT and Performance improvements

此版本是对 **Crankshaft** 时代的核心能力的进一步释放。

### 1. 更智能的内联（Inlining）决策

JIT 编译器内联函数的决策权重得到了重新调整。
现在 V8 会通过更复杂的启发式算法来判断：内联带来的速度提升，是否值得之后可能产生的去优化损失。它开始考虑函数在调用点的“热度密度”，而非简单的整体调用次数。

### 2. 内存标记（Tagged Pointers）的效率提升

优化了区分 Smi（小整数）和 HeapObject 指令的汇编逻辑。在 64 位机器上，利用高位地址的特性，将这一次判别的开销缩减到了极致。

### 3. 一针见血的见解

自适应 JIT 的本质是“权衡”。v3.10 通过更细腻的内联控制，说明了 V8 已经从一个野心勃勃的技术雏形，进化为一个能够精准控制每一行生成代码成本与收益的工业级编译器。

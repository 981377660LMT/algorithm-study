# V8 v7.4 发布：参数不匹配优化与字节码刷新

# V8 release v7.4: Faster calls with arguments mismatch and bytecode flushing

V8 v7.4 针对函数调用的边缘情况和执行后的内存足迹进行了精准打击。

### 1. 消除“适配器帧”的损耗

当 JS 调用一个实参数量与形参数量不一致的函数时，V8 以前会插入一个“参数适配器帧”（Arguments Adaptor Frame）来平衡栈。这在现代严格模式的代码中其实往往是不必要的。
v7.4 引入了直接调用优化：如果被调用者不依赖 `arguments` 对象且是严格模式，V8 可以跳过这一昂贵的栈操作。在某些基准测试中，这一改动让函数调用开销降低了 60% 以上。

### 2. 字节码刷新 (Bytecode Flushing)

为了在内存有限的设备上跑得更久，V8 以前对字节码的处理是“持久化”的。v7.4 引入了刷新机制：JS 函数的字节码如果长时间未被调用，在 GC 期间可以被直接“丢弃”。如果后续需要运行，再从源码重新生成。这能释放约 15% 的 V8 堆空间内存。

### 3. JIT-less 模式雏形

引入了 `--jitless` 参数，标志着 V8 首次支持完全不分配可执行内存的运行模式。虽然性能大打折扣，但它彻底解决了在禁止 JIT 的平台（如游戏主机和 iOS 核心应用环境）上的运行难题。

### 4. 一针见血的见解

v7.4 证明了“少即是多”：减少不必要的栈帧、释放不再使用的字节码。这些优化看似在“退步”，实则是 V8 向更轻量化、更普适化迈进的体现。

# 类型的契约：更严格的 IC 追踪

# V8 release v3.14: Inline Cache refinements

### 1. IC (Inline Cache) 的稳定性提升

这是对 V8 核心机制的又一次加固。
通过改进 **Stub Cache** 的查找权重，V8 能够更好地处理那些“偶尔多态”的调用点。如果你在一个函数中绝大多数时间传入同一种对象，但偶尔传入另一种，V8 现在能更聪明地保持热点路径的机器码，而不是立即将其判定为“污染”并退回到最慢的操作。

### 2. 内存布局的微调

针对 **Map**（隐藏类）的依赖链进行了修减，减少了由于原型链过深导致的内存引用开销。

### 3. 一针见血的见解

Inline Caching 是 V8 能够在 2008 年一炮而红的秘密武器。v3.14 的意义在于，它通过对 IC 状态机的微调，让这种基于“概率”的优化在现实世界复杂、多变的业务代码中表现得更加稳健，减少了性能的大起大落。

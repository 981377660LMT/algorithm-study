# V8 v4.2 发布：ES6 Class 的初步落地

# V8 release v4.2: Initial support for ES6 classes

V8 v4.2 在语言封装性上迈出了关键一步。

### 1. 技术本质：语法糖的底层实现

`class` 在 v4.2 中正式亮相。在 V8 内部，它主要被视为函数和原型链逻辑的一层高级封装。
**难点：`super` 关键字**。
为了实现 `super.method()`，V8 的执行上下文必须能够追踪到当前函数背后的“家对象”（Home Object）。为此，V8 在函数对象内部新增了一个隐藏槽位，专门用于存储原始原型链引用，确保了继承关系的稳健回溯。

### 2. `Object.assign` 的早期介入

引入了 `Object.assign`。由于此时新流水线尚在打磨，其早期实现依然保留了一部分 JS Builtins 的逻辑，这为后来向 C++ 原生实现的彻底迁移奠定了语义基础。

### 3. 一针见血的见解

v4.2 标志着 JS 终于有了像样的“面向对象”门面。虽然底层依然是原型链，但通过引擎对 `class` 的原生支持，开发者可以写出更具结构化的代码，而 V8 也能更好地预测对象形状（Shapes），从而进行更激进的布局优化。

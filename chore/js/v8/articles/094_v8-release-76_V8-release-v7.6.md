# V8 v7.6 发布：WeakMap 回收与内置特性增强

# V8 release v7.6: Improved WeakMap cleanup and native features

V8 v7.6 专注于语言层级的规范支持和内存管理的微操优化。

### 1. 内存管理：WeakMap 后台回收

以往 `WeakMap` 和 `WeakSet` 的清理主要依赖于主线程的 GC 周期。v7.6 改进了并发标记阶段对 Weak 型集合的处理，使得非活动键值对能更早地在后台被识别并回收，减少了长时运行应用的内存峰值。

### 2. 标准落地：`Promise.allSettled`

此特性的原生实现（Builtin）比任何 Polyfill 都要快且省内存。因为它直接复用了 V8 底层现有的 Promise 解析队列和任务微任务调度器，消除了中间对象的分配成本。

### 3. BigInt 格式化输出

改进了 BigInt 在不同数制（如 `toString(16)`）下的转换速度。这主要是通过优化了内部数据结构的位数存储和快速计算算法实现的，使其在加密计算等密集场景下表现更佳。

### 4. 一针见血的见解

v7.6 展示了 V8 对“边缘内存”的极致追求。通过优化 `WeakMap` 的回收语义，V8 反映了现代大型应用（由海量小对象和映射关系组成）对 GC 实时性越来越高的要求，避免了“内存阴影”的产生。

# V8 v8.0 发布：正式引入可选链与空值合并

## V8 release v8.0

- **Original Link**: [https://v8.dev/blog/v8-release-80](https://v8.dev/blog/v8-release-80)
- **Publication Date**: 2019-12-18
- **Summary**: 这是一个里程碑版本。V8 v8.0 不仅版本号达到了“V8”，还带来了指针压缩（实验性）、可选链 (`?.`) 和空值合并 (`??`) 等极具生命力的 JS 特性，并大幅优化了高阶内置函数。

---

### 1. 语法革命

V8 v8.0 率先支持了两个改变 JS 编写习惯的特性：

- **可选链 (Optional Chaining `?.`)**：再也不用写冗长的 `a && a.b && a.b.c` 了。
- **空值合并 (Nullish Coalescing `??`)**：解决了 `||` 在处理 `0` 或 `""` 时的逻辑陷阱。

### 2. 性能巅峰 (Size & Speed)

#### A. 指针压缩 (Pointer Compression) 首次亮相

虽然在 v8.0 中还在打磨，但它已经展示了惊人的潜力：

- 堆内存减小 40%。
- 垃圾回收速度加快，因为需要扫描的数据总量变短了。

#### B. 优化高阶内置函数

以往 TurboFan 对 `Array.prototype.map` 或 `Function.prototype.call.bind` 等模式的优化存在局限。

- v8.0 移出了这些限制，使得通过 `.call` 或 `.bind` 调用的内置函数也能被内联。

### 3. 技术细节：减少字节码大小

V8 的解释器 Ignition 在此版本中改进了寄存器分配算法，生成的字节码体积平均减少了 **5-10%**。这意味着更少的内存占用和更快的解析速度，对于低端 Android 设备（如 Android Go）尤为关键。

### 4. 开发者启示

可选链不仅是语法糖，V8 对其底层进行了专门优化。相比于手动编写大量的 `if` 判断，`?.` 在某些路径下能生成更紧凑的短路指令。

### 5. 总结

V8 v8.0 不仅仅是数字上的巧合，它标志着 JS 引擎进入了大规模内存优化（指针压缩）和更现代语言特性的新时代。

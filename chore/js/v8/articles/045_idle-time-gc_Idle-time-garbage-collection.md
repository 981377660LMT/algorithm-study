# 零成本垃圾回收：利用空闲时间消除卡顿

# Idle-time garbage collection: Reclaiming time in 16ms

V8 是如何做到既能回收垃圾又不打断 60FPS 的游戏画面的？

### 1. 核心理念：Railey 调度器

通过与浏览器 Blink 引擎的深度耦合，V8 可以精准获知每一帧的“空余时间”。如果一帧渲染只用了 6ms，剩余的 10ms 就是 GC 任务可以潜入的“空闲窗口”。

### 2. 任务微粒化

为了利用这些碎片化的空闲时间，V8 将沉重的垃圾回收（如对象移动、老生代扫描）拆分为极细小的微型任务。这些任务由调度器在空闲时段弹性分发，并在下一帧渲染开始前自动挂起。

### 3. 一针见血的见解

“空闲 GC”的引入是 V8 架构中的一项哲学突破：**垃圾回收不应该是一种按需分配的暴力操作，而应该是一种润物无声的资源协调**。它让 Web 引擎具备了像成熟操作系统一样的任务优先级感知，极大地降低了用户感知的 Jank。

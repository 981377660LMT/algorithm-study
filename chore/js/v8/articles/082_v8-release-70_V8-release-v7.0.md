# V8 v7.0 发布：稳定排序与移动内存优化

# V8 release v7.0: Stable Array.prototype.sort and mobile memory wins

V8 迎来 7.0 大版本号，不仅带来了规范的基石，还解决了长久以来的算法争议。

### 1. 终极一致：Array.prototype.sort 变稳定了

以前 V8 对长序列排序使用不稳定的快速排序（QuickSort）。在 v7.0 中，V8 全面切换到了 Timsort 算法。这不仅意味着排序结果具备了稳定性（相同权值的元素保持原序），也在处理“部分有序”的真实数据时表现出了更好的性能。

### 2. 减少移动端白屏：解析速度提升 2x

通过改进流式解析代码的并行策略，v7.0 使得解析大规模 JS 源码的时间在某些弱 CPU 设备上缩减了一半。这极大地优化了移动端网页的首屏加载速度。

### 3. 可移植的内置函数 (Portable Builtins)

V8 引入了其专用的强类型汇编封装语言 **Torque**。7.0 开始大量使用 Torque 重写原本用原始机器指令书写的内置函数。这使得 V8 能更轻松地将性能优化同步到所有硬件架构（x64, ARM, MIPS 等），而不必手动编写多套汇编。

### 4. 一针见血的见解

v7.0 是 V8 走向“稳健”的标志。稳定排序的引入宣告了 JS 对底层算法确定性的回归，而 Torque 的大规模应用则标志着 V8 开始通过元编程（Meta-programming）来应对日益复杂的硬件碎片化挑战。

https://discuss.codemirror.net/t/codemirror-view-6-36-6-is-broken/9166/2
使用 yarn 升级一个包经常会导致它重复安装其他包——安装多个版本。我认为这是 yarn 的缺陷行为。CodeMirror 假设它的每个包只被加载一次。你得清理你的包锁文件，让它能正确地去重。或者，我推荐的做法是改用 npm，它现在维护得更好、更可靠。

package.json 中的 `resolutions` 字段（主要由 `Yarn` 包管理器支持，`npm` 中对应的功能叫 `overrides`）允许你**强制指定**项目依赖树中某个包的版本。

当你安装依赖时，你的直接依赖（`dependencies`）可能又会依赖其他的包，这些被称为“传递性依赖”或“间接依赖”。有时，不同的包可能会依赖同一个包的不同版本，或者某个间接依赖存在已知的安全漏洞或 bug。

`resolutions` 的主要作用就是解决这类问题，它允许你声明：“在我的整个项目中，无论哪个依赖项需要 `some-package`，都必须使用我指定的 `x.y.z` 版本。”

### 主要使用场景：

1.  **安全修复**：当一个间接依赖被发现有安全漏洞，但你的直接依赖还没有更新时，你可以使用 `resolutions` 强制将这个有漏洞的包升级到一个安全的版本。
2.  **解决版本冲突**：如果你的两个依赖项分别依赖了某个包的两个不兼容版本，导致应用出错，你可以尝试用 `resolutions` 将其统一到一个可以兼容的版本。
3.  **统一依赖版本**：确保整个项目中某个特定的包只存在一个版本，避免因版本不一致导致的潜在问题，并可能减小最终打包体积。
4.  **临时修复 Bug**：如果某个间接依赖的特定版本有 bug，你可以用它来锁定到一个已修复或没有问题的版本。

### 示例 (在 package.json 中):

假设你的项目依赖了 `package-a` 和 `package-b`。
`package-a` 依赖 `lodash@4.17.15`
`package-b` 依赖 `lodash@4.17.20`

你希望整个项目都使用最新的 `lodash` 版本来保持一致。

```json
{
  "name": "my-project",
  "version": "1.0.0",
  "dependencies": {
    "package-a": "1.0.0",
    "package-b": "2.0.0"
  },
  "resolutions": {
    "lodash": "4.17.21"
  }
}
```

当你运行 `yarn install` 后，Yarn 会确保 node_modules 中所有需要 `lodash` 的地方都解析到 `4.17.21` 版本。

**注意**：这是一个强大的工具，但也应该谨慎使用。强制覆盖版本可能会导致意想不到的兼容性问题，因为它违背了依赖项本身的版本要求。通常它被用作临时解决方案，最好的方式还是等待并升级到官方修复了依赖问题的包版本。

- 软件架构的终极目标是，用最小的人力成本来满足构建和维护该系统的需求。
- 一个软件架构的优劣，可以用它满足用户需求所需要的成本来衡量。
- 软件架构师必须创建出一个可以让功能`实现起来更容易、修改起来更简单、扩展起来更轻松的软件架构`
- **面向对象编程就是以多态为手段来对源代码中的依赖关系进行控制的能力**
- 如果 A 组件不想被 B 组件上发生的修改所影响，那么就应该让 B 组件依赖于 A 组件
- 软件架构这项工作的实质就是规划如何将系统切分成组件，并安排好组件之间的排列关系，以及组件之间互相通信的方式
- 如果有两段看起来重复的代码，它们走的是不同的演进路径，也就是说它们有着不同的变更速率和变更缘由，那么这两段代码就不是真正的重复
- 插件式架构的好处
  将系统设计为插件式架构，就等于构建起了一面变更无法逾越的防火墙。
  换句话说，`只要 GUI 是以插件形式插入系统的业务逻辑中的，那么 GUI 这边所发生的变更就不会影响系统的业务逻辑`

- `业务逻辑应该保持纯净，不要掺杂用户界面或者所使用的数据库相关的东西。`在理想情况下，这部分代表业务逻辑的代码应该是整个系统的核心，其他低层概念的实现应该以插件形式接入系统中。`业务逻辑应该是系统中最独立、复用性最高的代码`
  反面例子：很多地方的接口性能都由于某个没用的统计数据多耗费了将近 1s 的时间
- 消除循环依赖有两种方式

  1. 依赖反转。若存在循环依赖 A>B>C>D>B，可在 B 中定义接口，C 实现接口，则依赖关系变为 A>B<C
  2. 共同依赖一个新组件，这也是 spring 框架中控制反转(IOC) 的就是使用此方法。若存在循环依赖 A>B>C>D>B，可定义新组件 E，让 B 和 C 同时依赖 E,则依赖关系变为 A>B>E<C

- 软件架构师可以根据相关函数被修改的原因、修改的方式及修改的时间来进行分组隔离，`并将这些相互隔离的函数分组整理成组件结构，使得高阶组件不会因低阶组件被修改而收到影响`

- 一句话总结好的软件架构：围绕业务逻辑和用例而非技术框架展开架构设计，将软件策略分为高低层，层次越高离输入输出越远，离业务逻辑越近，通过 DIP 严格控制依赖关系，让低层依赖于高层
- 整洁的代码可以通过 SOLID 原则来指导
- 组件的构建则可以分为组件聚合和组件耦合：

  - 组件的聚合有三个原则：

  1. 复用/发布等同原则：软件复用的最小粒度应等同于其发布的最小粒度。
  2. 共同闭包原则：应该将那些会同时修改，并且为相同目的而修改的类`放到同一个组件中`。
  3. 共同复用原则：不要强迫一个组件的用户依赖他们不需要的东西。

  - 组件的耦合有三个原则：

  1. 无依赖环原则：组件依赖关系图中不应该出现环。
  2. 稳定依赖原则：依赖关系必须要指向更稳定的方向。
  3. 稳定抽象原则：`一个组件的抽象化程度应该与其稳定性保持一致。`

- 所有的软件系统都可以降解为策略与细节两种元素：
  - 策略体现的是软件中所有的业务规则与操作过程，因此它是系统真正的价值所在。
  - 细节就是具体的框架和数据库等，细节就是可选项。`细节推迟`的好处是：
    - 越到项目的后期，就拥有越多的信息来做出合理的决策。
    - 可以让有机会做不同的尝试。保留这些可选项的时间越长，实验的机会也就越多，做决策的时候就能拥有越充足的信息。

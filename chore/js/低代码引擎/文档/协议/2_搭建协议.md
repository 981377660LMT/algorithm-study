https://lowcode-engine.cn/site/docs/specs/lowcode-spec

- 是什么：本协议描述的是低代码搭建平台产物（应用、页面、区块、组件）的 `schema 结构`，`以及`实现其数据状态更新（内置 api）、能力扩展、国际化等方面完整，只在低代码搭建场景下可用；
- 为什么：一套面向开发者的 schema 规范，用于`规范化约束搭建编辑器的输出，以及渲染模块和出码模块的输入`，将搭建编辑器、渲染模块、出码模块`解耦`，保障搭建编辑器、渲染模块、出码模块的`独立升级`。
- 怎么办：

1. 协议结构

```json
{
  "version": "1.0.0", // 当前协议版本号
  "componentsMap": [
    {
      // 组件描述
      "componentName": "Button",
      "package": "@alifd/next",
      "version": "1.0.0",
      "destructuring": true,
      "exportName": "Select",
      "subName": "Button"
    }
  ],
  "utils": [
    {
      "name": "clone",
      "type": "npm",
      "content": {
        "package": "lodash",
        "version": "0.0.1",
        "exportName": "clone",
        "subName": "",
        "destructuring": false,
        "main": "/lib/clone"
      }
    },
    {
      "name": "moment",
      "type": "npm",
      "content": {
        "package": "@alifd/next",
        "version": "0.0.1",
        "exportName": "Moment",
        "subName": "",
        "destructuring": true,
        "main": ""
      }
    }
  ],
  "componentsTree": [
    {
      // 描述内容，值类型 Array
      "id": "page1",
      "componentName": "Page", // 单个页面，枚举类型 Page|Block|Component
      "fileName": "Page1",
      "props": {},
      "css": "body {font-size: 12px;} .table { width: 100px;}",
      "children": [
        {
          "componentName": "Div",
          "props": {
            "className": ""
          },
          "children": [
            {
              "componentName": "Button",
              "props": {
                "prop1": 1234, // 简单 json 数据
                "prop2": [
                  {
                    // 简单 json 数据
                    "label": "选项 1",
                    "value": 1
                  },
                  {
                    "label": "选项 2",
                    "value": 2
                  }
                ],
                "prop3": [
                  {
                    "name": "myName",
                    "rule": {
                      "type": "JSExpression",
                      "value": "/w+/i"
                    }
                  }
                ],
                "valueBind": {
                  // 变量绑定
                  "type": "JSExpression",
                  "value": "this.state.user.name"
                },
                "onClick": {
                  // 动作绑定
                  "type": "JSFunction",
                  "value": "function(e) { console.log(e.target.innerText) }"
                },
                "onClick2": {
                  // 动作绑定 2
                  "type": "JSExpression",
                  "value": "this.submit"
                }
              }
            }
          ]
        }
      ]
    }
  ],
  "constants": {
    "ENV": "prod",
    "DOMAIN": "xxx.com"
  },
  "css": "body {font-size: 12px;} .table { width: 100px;}",
  "config": {
    // 当前应用配置信息
    "sdkVersion": "1.0.3", // 渲染模块版本
    "historyMode": "hash", // 不推荐，推荐在 router 字段中配置
    "targetRootID": "J_Container",
    "layout": {
      "componentName": "BasicLayout",
      "props": {
        "logo": "...",
        "name": "测试网站"
      }
    },
    "theme": {
      // for Fusion use dpl defined
      "package": "@alife/theme-fusion",
      "version": "^0.1.0",
      // for Antd use variable
      "primary": "#ff9966"
    }
  },
  "meta": {
    // 应用元数据信息，key 为业务自定义
    "name": "demo 应用", // 应用中文名称，
    "git_group": "appGroup", // 应用对应 git 分组名
    "project_name": "app_demo", // 应用对应 git 的 project 名称
    "description": "这是一个测试应用", // 应用描述
    "spma": "spa23d", // 应用 spm A 位信息
    "creator": "月飞",
    "gmt_create": "2020-02-11 00:00:00", // 创建时间
    "gmt_modified": "2020-02-11 00:00:00" // 修改时间
  },
  "i18n": {
    "zh-CN": {
      "i18n-jwg27yo4": "你好",
      "i18n-jwg27yo3": "中国"
    },
    "en-US": {
      "i18n-jwg27yo4": "Hello",
      "i18n-jwg27yo3": "China"
    }
  },
  "router": {
    "baseUrl": "/",
    "historyMode": "hash", // 浏览器路由：browser  哈希路由：hash
    "routes": [
      {
        "path": "home",
        "page": "page1"
      }
    ]
  },
  "pages": [
    {
      "id": "page1",
      "treeId": "page1"
    }
  ]
}
```

2. 应用描述

```
├── META/                          # 低代码元数据信息，用于多分支冲突解决、数据回滚等功能
├── public/                        # 静态文件，构建时会 copy 到 build/ 目录
│   ├── index.html                 # 应用入口 HTML
│   └── favicon.png                # Favicon
├── src/
│   ├── components/                # 应用内的低代码业务组件
│   │   └── guide-component/
│   │       ├── index.js           # 组件入口
│   │       ├── components.js      # 组件依赖的其他组件
│   │       ├── schema.js          # schema 描述
│   │       └── index.scss         # css 样式
│   ├── pages/                     # 页面
│   │   └── home/                  # Home 页面
│   │       ├── index.js           # 页面入口
│   │       └── index.scss         # css 样式
│   ├── layouts/
│   │   └── basic-layout/          # layout 组件名称
│   │       ├── index.js           # layout 入口
│   │       ├── components.js      # layout 组件依赖的其他组件
│   │       ├── schema.js          # layout schema 描述
│   │       └── index.scss         # layout css 样式
│   ├── config/                    # 配置信息
│   │   ├── components.js          # 应用上下文所有组件
│   │   ├── routes.js              # 页面路由列表
│   │   └── app.js                 # 应用配置文件
│   ├── utils/                     # 工具库
│   │   └── index.js               # 应用第三方扩展函数
│   ├── locales/                   # [可选] 国际化资源
│   │   ├── en-US
│   │   └── zh-CN
│   ├── global.scss                # 全局样式
│   └── index.jsx                  # 应用入口脚本，依赖 config/routes.js 的路由配置动态生成路由；
├── webpack.config.js              # 项目工程配置，包含插件配置及自定义 webpack 配置等
├── README.md
├── package.json
├── .editorconfig
├── .eslintignore
├── .eslintrc.js
├── .gitignore
├── .stylelintignore
└── .stylelintrc.js
```

---

- 协议中子规范 Level 定义

规范等级 实现要求
A 强制规范，必须实现；违反此类规范的协议描述数据将无法写入物料中心，不支持流通。
AA 推荐规范，推荐实现；遵守此类规范有助于业务未来的扩展性和跨团队合作研发效率的提升。
AAA 参考规范，根据业务场景实际诉求实现；是集团层面鼓励的技术实现引导。

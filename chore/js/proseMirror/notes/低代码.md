# 低代码类比 prosemirror

SchemaApi 需求：

## M

1. modal:
   - 结构：基于 immer.js 的不可变 json 数据结构，无业务含义；
   - (规则、行为)：校验.
2. transform: Step 原子操作，可追踪、可逆、可重放；Transform(无业务含义)。
3. state：
   - schema，具有业务含义(eg:协同光标)，参与协同的数据;
   - 所有对状态的修改（无论是修改文档内容，还是移动光标）都必须通过创建一个 `Transaction` 来完成;
   - (扩展机制)：Plugin

---

## V

4. view: 数据驱动画布渲染。

---

history 模块通过反转（invert）Step 来实现撤销。
collab 模块则通过交换和重映射（rebase）来自不同客户端的 Step 来实现协同编辑。

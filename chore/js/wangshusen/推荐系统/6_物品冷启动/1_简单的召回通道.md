这节课的内容是物品冷启动 (item cold start) 中的召回。冷启动召回的难点是缺少用户交互，还没学好笔记 ID embedding，导致双塔模型效果不好。而且缺少用户交互会导致 ItemCF 不适用。

这节课介绍两种简单的召回通道：

1. 改造双塔模型，使得它适用于冷启动。
2. 类目召回。

---

这节课正式进入了**物品冷启动**的技术实战篇，专注于解决第一道关卡——**召回 (Recall)**。

王树森老师首先分析了为什么新笔记召回难，然后介绍了两种最基础但也最实用的冷启动召回策略：**改造双塔模型** 和 **基于类目/关键词的倒排索引召回**。

以下是对这节课内容的深度逻辑拆解与总结：

### 1. 为什么常规召回对新笔记失效？

要想解决问题，先得知道痛点在哪。新笔记在冷启动阶段面临“信息缺失”的困境：

- **缺失 1：行为数据 (Interaction Data)**
  - 新笔记没有点击、点赞历史。
  - **后果**：**ItemCF 失效**。ItemCF 依赖于“喜欢 A 的用户同时也喜欢 B”，新笔记没人点过，没法通过重合用户计算相似度。
- **缺失 2：Item Embedding**
  - ID Embedding 是模型中最强的特征，它是通过大量反向传播学出来的。
  - 新笔记的 ID 是新的，对应的 Embedding 向量通常是随机初始化的，毫无意义。
  - **后果**：**双塔模型失效**。直接把新 ID 丢进双塔，算出来的向量是乱的，召回结果也是乱的。

### 2. 策略一：改造双塔模型 (Fixing Two-Tower Model)

既然双塔模型是因为 Embedding 没学好才失效，那我们就想办法给它一个“靠谱的初始值”。

#### 方案 A：Default Embedding (默认向量)

- **做法**：所有新笔记在发布初期，不使用自己的 ID，而是共享一个全局通用的 **Default ID**。
- **逻辑**：模型训练时，专门训练这个 Default ID 的向量。虽然它不够个性化，但至少它是一个经过训练的、代表“一般新笔记”水平的稳定向量，比随机乱猜好得多。
- **后续**：等笔记积累了足够的交互数据，再切换回它自己的 ID Embedding。

#### 方案 B：内容映射 (Content-based Mapping) —— _更推荐_

- **做法**：利用 **Side Information（图文内容、类目）** 来初始化 ID Embedding。
- **流程**：
  1.  新笔记发布，提取其`内容特征向量`（Content Embedding）。
  2.  去老笔记库里找 Top-K 个内容最相似的高曝光笔记。
  3.  把这 K 个老笔记的 ID Embedding 取平均。
  4.  用这个平均值作为新笔记 ID Embedding 的初始值。
- **逻辑**：长得像的笔记，表现应该也像。借用“老前辈”的经验来启动“新人”。

### 3. 策略二：类目/关键词召回 (Category/Keyword Retrieval)

这是最传统、最简单，但**对于刚刚发布的 0 曝光笔记最有效**的手段。

- **原理**：维护一个倒排索引。
  - Key：类目（如“美食”）或 关键词（如“火锅”）。
  - Value：该类目下按**发布时间倒排**的笔记列表（最新的在前）。
- **流程**：
  1.  用户画像里有“美食”标签。
  2.  直接去“美食”索引里拉取**最新**的 $K$ 篇笔记。
- **优点**：
  - **极快**：发布即可被召回，无延迟。
  - **覆盖率高**：保证新笔记一定有曝光机会。
- **缺点**：
  - **窗口期短**：因为是按时间倒排，笔记发了一小时后就沉底了，再也捞不出来了。
  - **精度低 (粗糙)**：只匹配大类目。用户喜欢“观赏鱼”，你推给他“猫粮”，虽然都属“宠物”类目，但用户并不买账。

### 4. 工程架构技巧：多级召回池

为了解决新老不平权的问题，通常不会把新笔记和老笔记混在一个池子里召回。

- **做法**：建立多个独立的召回队列。
  - Queue 1：&lt; 1 小时的新笔记
  - Queue 2：&lt; 6 小时的新笔记
  - Queue 3：&lt; 24 小时的新笔记
  - Queue 4：30 天内的老笔记
- **逻辑**：强制给 Queue 1 和 Queue 2 留出固定的召回配额（Quota），`防止老笔记凭着高 CTR 把新笔记挤压得没影了。`

### 5. 总结

这节课介绍了冷启动召回的“基本功”。

- **双塔改造**解决了“没有 ID 特征”的问题，让深度模型能跑起来。
- **类目/关键词召回**解决了“第一秒曝光”的问题，保证了系统的响应速度。

但这就够了吗？显然不够。因为类目召回太粗糙，而双塔改造又太依赖内容相似度。下节课将介绍更高级的 **聚类召回** 和 **Look-alike**，进一步提升冷启动的精准度。

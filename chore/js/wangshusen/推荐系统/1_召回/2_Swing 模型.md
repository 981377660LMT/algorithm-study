这节课介绍 Swing 模型，它跟 ItemCF 非常类似，唯一的区别在于计算物品相似度的方式不同。

---

你好。这是王树森关于**Swing 算法**的讲解。Swing 是 ItemCF（基于物品的协同过滤）在工业界最重要、最常用的变体之一。

其核心在于：**修正了 ItemCF 容易被“小圈子”数据误导的缺陷。**

以下是逻辑清晰、一针见血的分析：

### 一、 核心痛点：ItemCF 的“小圈子”误判

为了理解 Swing，首先要明白标准 ItemCF 错在哪里。

- **ItemCF 的假设：** 如果很多用户同时点了物品 A 和物品 B（共现），那么 A 和 B 相似。
- **实际场景中的 Bug（Bad Case）：**
  - **场景：** 一个微信群里分享了两篇完全无关的笔记。一篇是“某品牌护肤品打折”，另一篇是“字节跳动由裁员了”。
  - **现象：** 群里的几十个人因为社交关系，可能顺手都点了这两篇笔记。
  - **ItemCF 的误判：** 算法看到这几十个用户的共现，会误以为“护肤品”和“裁员”这两篇笔记高度相似，从而把它们推荐给其他并不关心的用户。
- **本质分析：** 这种共现是**基于社交关系（Social Connection）**的，而不是**基于兴趣内容（Interest/Content Connection）**的。ItemCF 无法区分这两者，它只看数量，不看来源结构。

---

### 二、 Swing 的解决方案：结构化降权

Swing 的名字暗示了如“秋千”般的交互关系（用户-物品-用户）。它的核心思想是：**给共现的用户打个折。**

如果同时点击了物品 $I_1$ 和 $I_2$ 的两个用户 $u_1$ 和 $u_2$，他们俩本身的历史行为这就非常相似（说明他们可能来自同一个小圈子/微信群），那么他们对 $I_1$ 和 $I_2$ 相似度的贡献度就要**降低**。

#### 1. 关键指标：用户重合度 (Overlap)

首先定义两个用户之间的相似度（小圈子程度）：

- **定义：** 用户 $u_1$ 和 $u_2$ 历史交互过的物品集合交集的大小，记为 $Overlap(u_1, u_2)$。
- **逻辑：** $Overlap$ 越大，说明这两个用户“穿一条裤子”，他们共同的行为不具备代表性，属于噪声数据。

#### 2. Swing 相似度公式

计算物品 $I_1$ 和 $I_2$ 的相似度时，不再是简单的人数数数，而是遍历所有同时喜欢 $I_1, I_2$ 的用户对 $(u_1, u_2)$：

$$
Sim(I_1, I_2) = \sum_{u_1 \in V} \sum_{u_2 \in V, u_2 \neq u_1} \frac{1}{\alpha + Overlap(u_1, u_2)}
$$

- **集合 $V$:** 同时喜欢物品 $I_1$ 和 $I_2$ 的用户集合。
- **$Overlap(u_1, u_2)$:** 两个用户历史行为的重合度。如果重合度很高（小圈子），分母变大，分数值变小 $\rightarrow$ **权重降低**。
- **$\alpha$:** 平滑系数（超参数），防止分母为 0，同时调节惩罚力度。

---

### 三、 Swing 与 ItemCF 的一针见血对比

| 特性         | ItemCF (标准版)                              | Swing (工业改良版)                                       |
| :----------- | :------------------------------------------- | :------------------------------------------------------- |
| **视角**     | **单点视角**：把用户视为独立的个体。         | **结构视角**：观察用户群体内部的关系网。                 |
| **计算逻辑** | 只要两个物品共现次数多，就认为相似。         | 共现的用户必须**“长得不一样”**（来源多样化），才算相似。 |
| **抗噪能力** | 弱。容易受刷单工会、微信群、特定小群体影响。 | 强。自动降权小圈子带来的伪相关。                         |
| **适用场景** | 基础推荐，数据稀疏场景。                     | **社交属性强**或**数据噪声大**的 App（如微信、小红书）。 |

### 总结

Swing 算法本质上是在 ItemCF 的基础上加了一个**“反作弊/反聚集”的过滤器**。

它认为：**真正强相关的物品，其共同受众应该是广泛的、互不认识的、来自五湖四海的。** 如果共同受众都是同一个小团体的，那这种相关性大概率是假的。这就是 Swing 在工业界（阿里、小红书等）比传统 ItemCF 效果更好的根本原因。

---

- 在大规模场景下，需要把热点商品干掉，否则根本跑不动

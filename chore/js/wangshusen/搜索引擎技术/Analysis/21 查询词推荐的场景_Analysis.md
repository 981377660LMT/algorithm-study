# 21 查询词推荐的场景：它决定“用户搜什么”，不只是“搜了之后出什么”

如果把标准搜索链路理解为“给定查询词 $q$ → 出文档 $\{d\}$”，那么本章提醒你：

- 查询词推荐在很大程度上决定**用户会不会搜、搜什么**
- 在内容社区/短视频 APP（小红书/抖音/快手）里，**大量搜索请求来自推荐的查询词**而非用户完整输入

因此推词几乎可以自成闭环：

- 它有独立的召回、排序、指标体系
- 但它也必须对“把用户带到搜索结果页后的体验与转化”负责

---

## 21.1 搜索前推词：把“没想搜”变成“想搜”（搜索激发）

场景：用户点开搜索框但还没输入时，页面已经给了候选：

- 底纹词（1 条）
- 猜你想搜（若干条）
- 热榜（非个性化）

本章给的关键工程事实：

- 底纹词/猜你想搜来自同一条个性化链路：top1 做底纹，其余展示为猜你想搜
- 热榜来自统计（可被运营干预），所有用户相同

### 21.1.1 指标：既看点击（质量），也看“搜索渗透率”（规模）

- 推词点击率/有点比：衡量“词是否吸引、是否符合兴趣”
- 搜索渗透率：$\frac{SearchDAU}{DAU}$
  - 做得好会提升 SearchDAU（更多用户被激发产生搜索行为）

本章也埋了一个核心要求：推词要为转化负责（见 21.5）。

---

## 21.2 查询建议：SUG（搜索中）+ 纠错建议（搜索后）

### 21.2.1 SUG：工具属性极强，流量通常极大

SUG 的作用是“省输入、提效率”，因此它的评价不只看点击，还看效率：

- 使用率/有点比：$\frac{SUG点击次数}{搜索次数}$（本章提到通常可超过 50%）
- 点击位置：越靠前越好（类似搜索首点位置，是效率指标）
- 输入长度：越短越好（用户少打字即可到达目标 query）
- 转化指标：SUG 把用户带到 SERP 后，SERP 的点击与交互要好

### 21.2.2 搜后纠错：量不大但“兜底价值”高

本章给了两种交互形态：

- 算法不置信：展示原词结果，同时建议纠错词 $q'$
- 算法置信：直接展示 $q'$ 的结果，但仍问是否想搜原词 $q$

纠错流量小但能显著改善“搜错词导致结果完全不满足”的情况。

---

## 21.3 搜索结果页推词（相关搜索）：用 $q$ 找 $q'$

这是“搜索后”场景：用户搜完 $q$，SERP 中插入若干推荐查询词 $\{q'\}$。

关键点：

- 它非常像搜索引擎：不是 $q\to d$，而是 $q\to q'$
- 它往往带个性化：可用时间/地点/画像/历史等对候选 $q'$ 再排序

本章提出两个评价方向：

- 消费深度：用户搜索的 query 数（不重复）是否变多
- 兴趣宽度：推荐 query 的类目是否扩展用户兴趣边界

---

## 21.4 文档内推词：用当前文档 $d$ 推荐 query $q$

用户在阅读文档 $d$ 时，在文档页下方推荐查询词 $q$。

本章强调“相关但不必最相关”：

- 最相关的 query 往往是对文档的摘要式复述
- 但更好的推荐可能是“能继续深挖与扩展”的方向

例子（书里思路）：

- 读寿司类型介绍：
  - "寿司种类" 很相关，但可能不如 "上海寿司店"、"寿司做法"、"寿司醋怎么调" 更能带来后续探索

该场景通常强个性化，排序模型更像推荐系统。

---

## 21.5 评价指标总结：推词必须对“搜索承接”负责

本章把推词指标总结成四类：

- 有点比：四个推词场景都适用（质量/匹配度）
- 点击位置：主要用于 SUG（工具属性）
- 转化率：四个场景都要负责（推词→SERP→点击文档）
- 搜索渗透率：主要与搜前推词、文档内推词相关

### 21.5.1 为什么只看有点比不够？

推词的完整链路是：

- 推词曝光 query → 点击 query → SERP 曝光文档 → 点击文档

一个 query 可能“很吸睛”（有点比高）但搜索结果根本承接不了（供给差、相关文档少），最终用户失望离开。

### 21.5.2 推词如何影响转化？关键是“别推供给差的生僻 query”

虽然推词无法直接控制 SERP 出什么文档，但它可以通过“选择 query”间接控制转化：

- 给定 $q$，从文本与历史统计（如 SERP 有点比）可以推断转化
- 因此排序时应避免推“历史承接差”的 query

这句话是全章最工程化的结论之一：

> 推词系统想搞转化率，就要尽量不推生僻、相关文档少、历史统计有点比低的查询词。

---

## 21.6 常见坑与检查清单

- 只优化推词点击：会把“标题党 query”推上去，但 SERP 承接差，长期留存掉
- SUG 不优化效率指标：使用率高但点击位置靠后、输入长度长，体验仍差
- 推词与搜索承接割裂：推荐端指标好看但全链路转化差

---

## 21.7 练习（建议动手）

1. 为搜前推词设计一个多目标：点击（有点比）+ 搜索渗透率 + SERP 转化，写出你会如何加权。
2. 对一批候选 query，补充一个“供给质量分”：例如历史 SERP 有点比/首屏有点比，观察它与推词点击的冲突。
3. 为 SUG 设计离线评估：使用率、点击位置分布、平均输入长度，并按类目/时效意图切片。

---

## 21.8 与其它章节的连接

- 与第 18 章：离线召回/缓存召回会改变 SERP 供给，从而影响推词的“承接质量”
- 与第 19–20 章：推词排序同样是 learning-to-rank 问题，可复用 pointwise/pairwise/listwise 训练思想
- 与第 15 章：纠错/改写会改变用户最终发起的 query，影响 SUG 与搜后推词的统计分布

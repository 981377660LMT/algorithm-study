# 数据库系统核心概念总结

以下是 CMU 15-445/645 课程中期考试前后主要数据库系统概念的综合总结。

## 中期考试前的内容

### 1. 基础部分

- **SQL**：关系型数据库标准查询语言
- **缓冲池管理**：数据页面在内存与磁盘间的交换管理
- **哈希表**：用于快速查找的数据结构
- **B+树**：平衡树索引结构，支持高效范围查询
- **存储模型**：行存储 vs 列存储
- **查询间并行性**：多查询同时执行的并行策略

### 2. 查询优化

- **启发式优化**
  - 谓词下推：尽早应用过滤条件减少中间结果
  - 投影下推：尽早减少需处理的列
  - 嵌套子查询：重写和分解复杂查询
- **统计信息**
  - 基数估计：预测操作结果大小
  - 直方图：数据分布表示
- **基于代价的搜索**：评估多个执行计划选择最优方案

## 中期考试后的内容

### 3. 事务管理

- **ACID 特性**：原子性、一致性、隔离性、持久性
- **可串行性**
  - 冲突可串行性：检测与确保事务正确交错执行
  - 视图可串行性：基于读写集合关系判断
- **可恢复调度**：确保事务能够正确回滚
- **隔离级别与异常**：脏读、不可重复读、幻读等

### 4. 并发控制

- **两阶段锁（2PL）**
  - 严格 vs 非严格 2PL
  - 死锁检测与预防
- **多粒度锁**
  - 意向锁：表示下层存在锁
- **时间戳排序并发控制**
  - Thomas 写规则：忽略对旧版本的写入
- **乐观并发控制**
  - 读取阶段 → 验证阶段 → 写入阶段
- **多版本并发控制（MVCC）**
  - 版本存储与排序
  - 垃圾回收

### 5. 崩溃恢复

- **缓冲池策略**
  - STEAL/NO-STEAL：允许/不允许未提交事务修改的数据写入磁盘
  - FORCE/NO-FORCE：要求/不要求提交时立即写入磁盘
- **预写日志（WAL）**：确保修改前先记录日志
- **日志方案**：物理日志、逻辑日志、生理日志
- **检查点**：减少恢复时间的机制
- **ARIES 恢复**
  - 日志序列号（LSN）：追踪系统状态
  - 补偿日志记录（CLR）：撤销操作的日志

### 6. 分布式数据库

- **系统架构**：共享内存、共享磁盘、共享无关
- **复制**：主-从复制、多主复制
- **分区方案**：水平分区、垂直分区
- **两阶段提交（2PC）**：确保分布式事务一致性

---

1. 明确你的目标和资源
2. 不要过早优化(pre-mature optimization)
3. 不要抄近道(cutting corners)
   考虑可维护性和扩展性

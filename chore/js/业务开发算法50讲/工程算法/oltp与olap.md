# oltp与olap

**OLTP**（Online Transaction Processing，**联机事务处理**）和 **OLAP**（Online Analytical Processing，**联机分析处理**）是`数据库领域常见的两大应用场景`，二者在数据特点、系统设计、以及应用目标上都存在明显区别。

T: Transaction（事务）。感性理解就是后端开发、大并发。
A: Analytical（分析）。感性理解就是数据分析、大数据。

---

## 1. OLTP：联机事务处理

### 1.1 定义

- OLTP 系统通常面向日常业务操作，为大量的用户提供**实时的、频繁的增删改查**操作。
- 典型应用场景：电商订单系统、银行交易系统、在线支付系统、ERP 系统等。

### 1.2 主要特点

1. **高并发读写**：大量用户同时进行插入、更新、删除、查询。
2. **数据最新**：需要保证数据的**实时性**和**一致性**（事务要求）。
3. **访问简单**：每次操作访问的数据量往往较少（单条或少量记录）。
4. **数据库结构**：数据多采用**高度范式化（3NF 等）**，降低数据冗余，保证写入和更新效率。
5. **响应速度**：对响应时间要求高，通常要求**毫秒级**响应。

---

## 2. OLAP：联机分析处理

### 2.1 定义

- OLAP 系统更多面向**数据分析**、**业务决策**。往往在数据仓库或数据集市中，对大量的历史数据进行多维度的聚合分析。
- 典型应用场景：报表系统、BI（商业智能）、数据分析平台、数据挖掘等。

### 2.2 主要特点

1. **分析性查询**：通常是多表关联、聚合、排序、分组、统计等操作，查询**计算量大**，但**更新不频繁**。
2. **数据规模大**：需要存储并分析**长期的历史数据**，数据量可能达到 TB 级甚至 PB 级。
3. **关注多维度**：典型操作如“**钻取**”、“**切片**”和“**切块**”等，需要在不同维度、不同粒度对数据进行统计汇总。
4. **数据库结构**：多采用**星型、雪花型**或其他面向分析的模型，数据往往做了**去范式**、**预聚合**或**列式存储**以加速查询。
5. **响应速度**：可容忍秒级或更长的响应时间，但对**查询吞吐**和**并发分析能力**要求较高。

---

## 3. OLTP vs. OLAP 对比总结

| 维度              | OLTP（联机事务处理）                               | OLAP（联机分析处理）                                                      |
| ----------------- | -------------------------------------------------- | ------------------------------------------------------------------------- |
| **主要用途**      | 日常业务操作，增删改查                             | 数据分析、决策支持                                                        |
| **操作类型**      | 短小的、高并发的、实时事务操作                     | 复杂的、多维度查询与统计                                                  |
| **数据来源**      | 系统本身的业务数据                                 | 通常来自多个 OLTP 系统整合到数据仓库                                      |
| **数据规模**      | 相对较小，核心业务表通常保持在可控规模             | 通常非常大，包含历史数据（TB 级别或更高）                                 |
| **数据结构**      | 高度范式化，减少冗余                               | 去范式或星型/雪花模型，便于聚合查询                                       |
| **响应时间**      | 毫秒级或秒级，对实时性要求非常高                   | 秒级到分钟级，能容忍更长的查询时间                                        |
| **并发量**        | 高并发（数千到数万用户同时在线事务处理）           | 并发不一定很高，但单次查询往往计算量很大                                  |
| **更新频率**      | 非常频繁，每天大量写操作                           | 更新频率低，更多是批量导入或定期刷新                                      |
| **典型技术/实现** | MySQL、SQL Server、Oracle 等关系型数据库（事务型） | 数据仓库、Hadoop、Spark、ClickHouse、Greenplum 等大数据平台、分析型数据库 |

---

## 4. 总结

- **OLTP**：核心是支持大规模并发事务处理，保证**事务完整性**和**实时响应**。
- **OLAP**：核心是支持**批量分析**和**复杂查询**，对海量数据做聚合、统计，为业务分析和决策提供支撑。

在企业架构中，往往会将 **OLTP 系统** 和 **OLAP 系统** 进行**解耦**，通过 **ETL** 或 **实时同步** 的方式，把在线业务数据定期或实时地输送到数据仓库或分析平台，从而保证在 **OLTP** 端可以专注**事务处理**，在 **OLAP** 端可以专注**分析计算**。

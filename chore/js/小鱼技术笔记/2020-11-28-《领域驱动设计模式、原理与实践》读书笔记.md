2020-11-28-《领域驱动设计模式、原理与实践》读书笔记
https://blog.fishedee.com/2020/11/28/%E3%80%8A%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E3%80%81%E5%8E%9F%E7%90%86%E4%B8%8E%E5%AE%9E%E8%B7%B5%E3%80%8B%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/#%E6%A6%82%E8%BF%B0

如何划分系统模块，划分子域，然后用一个上下文对应一个子域来实现它。
如何让模块像乐高一样堆起来，每个上下文都是逻辑自治的，用松耦合的方式组合它们。
如何做单元测试，三段开发模式从根本上避免了数据库 mock，更好地做业务逻辑的单元测试。
如何做多表的查询。CQRS 提供了使用领域事件来构建非范式化数据，以实现最优化的查询。
面向对象编程模式的意义在那里。三段开发模式的第二段就是 OOP。
事务问题一直依赖于数据库的串行化隔离级别。聚合就是解决这个问题的。

---

如何复用一套代码满足多样化的需求？
https://zhuanlan.zhihu.com/p/181731816

## 模块切分的好坏标准是什么？

如果所有的需求都要集中到一个模块去等排期，那必然会拖慢速度

- 公共模块应该稳定(库代码)
- 避免超级繁忙的顶层模块
- 通过新增模块来扩展功能

如果一个需求动辄就要数个模块联合开发和调试，那必然会拖慢速度

- 要更关注“易变性”而不是“功能切分”(eg:如何添加权限校验功能)

## 这些经典的解决方案用了也就那样

如果原则一直都在那里，那为什么我们过去看过的代码都没遵守这些原则呢?

- 最容易想到的解决方案未必是最佳的方案
- 真正松耦合的接口定义形式并没有被大众所熟知
- 按照这些松耦合的接口去分解模块并不容易落地

**调整模块边界，重塑接口，这个是要触及灵魂的。痛彻心扉。 最容易想到也是最容易办到的方案，未必就是最好的方案**

## 松耦合的接口应该定义成什么样子？

- 基于 UI 的组合
- 不要返回值

## 为什么实际的业务代码都没有写成你说的那个样子？

- 当你听到别人的一个想法的时候，先想想为什么行得通
- 当你要提出一个想法的时候，先想想为什么行不通

后端业务架构开发经验

1. 业务模块划分，这是个说起来简单但是又很复杂的问题。
2. 原则

   - 高内聚，低耦合
   - keep it simple
   - design for failure

   为可维护性而努力，而不是便利性。

3. 高内聚，低耦合

   1. 领域编程
      面向领域编程，而不是面向数据库编程
   2. 正交分解
      如果是可能公开的需要长期维护的接口，形式要尽量简单、参数要尽量少、接口数量也要尽可能少，互相在功能上没有重叠，按照书上的称呼这叫正交。只有这样才能保证未来的接口升级对旧版接口用户的影响尽可能的小。

      - `分页接口要单独为一个接口`，不要和其他接口合并在一起
      - `批量接口是性能的关键`

   3. 单向依赖
      队列与解耦

4. Keep it simple

   1. 刚好能用
      好架构是迭代出来的，不是设计出来的。

      - 过度设计
      - 过早优化
      - 过度测试
      - 过度文档

      重构

   2. 奥卡姆剃刀定律
      如果两个设计实现后的效果是相差不大的，那么就选择最`简单的那个`设计。这启发我们，接口数量仅可能少，接口参数尽可能少，数据字段也尽可能的少。

5. Design for failure
   错误是每时每刻都会发生的，必须要检查。如果发生错误时，必须中断操作，不往下继续，避免发生严重的数据不一致问题

   **错误是普遍的**

   1. 检查错误
   2. 监控错误
   3. 容纳错误

2020-09-01-《PostgresSQL 修炼之道》读书笔记

1. 索引

- B-Tree
  适合等值和范围查询
- Hash 索引
  只能处理简单的等值查询
- Gist 索引
  本质是 R 树
  R 树是 B 树的扩展，它作为最流行的空间索引结构，广泛地应用于各种数据库系统

  Gist 索引可以加速的场景为：
  `空间搜索`，指定范围内的点，重叠的线段
  数组搜索，将数组的每个元素看成是一个点，然后归纳为一个线段
  全文搜索，将全文分割为分词的数组，然后用数组搜索来实现

- GIN 索引
  GIN 索引就是倒排索引

2. 事务

   - ACID ![Alt text](image-3.png)

3. 特点

总的来说，PG 的特点为：

- 完善丰富的数据类型，json，range，array 类型
- 先进的索引，gin，gist，甚至是未来的 rum
- 先进的查询优化器，多种多样的执行计划，bitmap index scan，topN sort，hash join，index sorted join
- 先进的插件机制，操作符，索引，表结构，数据类型都可以通过插件来扩展
- 比较复杂的维护，堆表结构造成的写放大问题，事务号是 32 位的回卷问题，mvcc 没有回滚段需要定期清理过期数据，多进程架构需要单独的进程池

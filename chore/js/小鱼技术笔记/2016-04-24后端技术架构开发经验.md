2016-04-24 后端技术架构开发经验

1. 概述
   后端开发流程基本上是

   需求分析（产品经理）
   开发实现（开发）
   测试代码（测试）
   部署监控（运维）
   架构师的目的是协调这个过程能够按质按量按时完成，并且相关人员都是高高兴兴，开开心心的。

2. 需求分析
   需求准确，开发快

   - 需求准确
     草图
     设计图
     时间表
   - 业务建模
     高内聚，低耦合
     单向依赖
     单一职责
     拥抱变化

3. 开发实现
   简单快捷，可维护，性能好

   1. 简单快捷
      - 输入校验与输出格式化
      - 错误处理
      - 日志输出
      - 公共库，数据库(orm)，缓存(cache)，会话(session)，队列(queue)，安全(security)，数据处理(linq)等等
      - 优化编译速度
   2. 可维护
      - 确定一个开发规范，大家一起遵守，必要时用`工具来约束`这个规范是必须的，强类型
      - 命名
      - 文档与注释
      - 依赖反转，用队列
      - 依赖注入，用接口，不用实现，编译速度更快
   3. 性能好
      过早的优化是万恶的根源
      只对重点进行优化
      优化的力度放在时间复杂度，IO 上，不要纠结细节

4. 测试代码
   简单快速，自动化

   1. 提取复用模块
      - 功能测试，equal 校验，时间，图片
      - 性能测试，benchmark 输出
      - 打桩，随机测试数据
      - WithError 函数自动生成
      - 优化编译速度
   2. 自动化
      单元测试 InitSample

5. 部署监控
   简单快速，推送与排查

   1. 简单快速
      make watch 与 make release 一键部署脚本 部署失败后回滚策略 部署过程的友好提示 后端仅仅写 panic 与 Throw，错误上报到哪里，什么时候上报都不用关心 性能监控更是无需添加代码

   2. 推送与排查
      报警的主动与及时推送 日志详细，有堆栈信息，堆栈的变量信息

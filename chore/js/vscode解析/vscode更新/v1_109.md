**VS Code 1.109** (2026年1月版) 是一个里程碑式的更新，主要标志着 VS Code 正在从“代码编辑器”向**多智能体（Multi-Agent）开发平台**进化。

> VS Code 如何演变成统一的 agent 用户体验，同时保持其开放性、可扩展性和开发者选择的核心价值

此次更新的核心在于极大增强了 **AI Agent（智能体）** 的能力，包括协调多个 Agent 协作（Orchestration）、增强推理透明度（Thinking Tokens）、以及更深度的系统集成（终端沙盒、集成浏览器）。

以下是对本次更新的深度分析与讲解：

---

### 1. 核心变革：多智能体协作 (Unified Agent UX)

这是本次更新的重中之重。VS Code 不再只是有一个 Copilot 聊天窗口，而是变成了一个可以管理、切换和组合不同 AI Agent 的控制台。

- **Agent 编排 (Orchestration)**: 就像我们在团队中分工一样，现在你可以让不同的 Agent 负责不同的任务。
  - **Plan Agent (`/plan`)**: 这是一个专门负责“思考”的 Agent。它引入了 **4阶段工作流**（探索 -> 对齐 -> 设计 -> 优化）。在你写代码前，它会先扫描项目，问你不清楚的需求，然后生成一份详细的实施计划。
  - **Subagents (子智能体)**: 主 Agent 可以唤起子 Agent 来并行处理任务。例如，主 Agent 在写代码时，可以派一个“搜索子 Agent”去查阅文档或全库搜索，二者互不干扰，还能共享上下文。
  - **会话管理**: 你可以像切换浏览器标签一样，在“本地 Agent”、“云端 Agent”和“后台 Agent”之间无缝切换。这解决了以前长对话中上下文混乱的问题。

### 2. Chat 体验升级：更透明、更可视化

AI 不再是一个“黑盒”，微软正在努力让你看懂 AI 是怎么想的。

- **思维链可视化 (Thinking Tokens)**: 如果你使用 Anthropic (Claude) 系列模型，现在可以看到模型的**推理过程**。你可以展开看到它在“想”什么，然后再看它给出的最终答案。这对于调试复杂的 Prompt 或理解 AI 为什么出错非常有用。
- **Mermaid 图表支持**: Chat 现在可以直接渲染 **Mermaid 流程图、时序图**。这对于让 AI 解释复杂的架构或代码逻辑非常有帮助，而且图表是可交互的（缩放、平移）。
- **主动提问 (Ask Questions Tool)**: 这是一个很人性化的改进。以前 AI 不懂会瞎猜，现在它可以调用工具向你**反向提问**（提供单选/多选/填空），确认需求后再动手。

### 3. 安全与信任：终端沙盒

随着 Agent 权限越来越大（可以运行命令、读写文件），安全问题变得至关重要。

- **终端沙盒 (Terminal Sandboxing)**: (目前仅限 macOS/Linux) 这是一个实验性功能，但非常关键。它限制了 Agent 调用的终端命令只能访问**当前工作区**的文件，并且可以**阻断网络访问**。这意味着即使 Prompt 注入攻击让 AI 尝试删库或外传数据，也会被沙盒拦截。
- **自动批准 (Auto-approval)**: 对于 `ls`, `docker ps`, `npm test` 等无害的高频命令，系统会自动批准执行，不再需要你每次点“确认”，在安全和效率之间取得了平衡。

### 4. 开发者生产力工具 (Workbench)

除了 AI，编辑器本身也有几个不仅实用而且期待已久的改进：

- **内置集成浏览器 (Integrated Browser)**: 终于！VS Code 引入了基于 Chromium 的完整浏览器视图，替代了简陋的 Simple Browser。
  - **支持 Cookie/登录**: 你可以直接在 VS Code 里登录 GitHub、StackOverflow 或调试需要登录的本地应用。
  - **DevTools**: 内置了完整的开发者工具（F12），前端开发不再需要频繁切屏。
- **括号内容双击选中**: 一个极其微小但提升幸福感的功能。双击括号（如 `(` 或 `{`）内部，可以直接选中括号内的所有内容。
- **`Git: Delete`**: 直接在命令面板运行 `git rm`，同时从磁盘和暂存区删除文件，比手动删文件再 git add 更加规范。

### 5. Agent 定制化 (Customization)

为了让企业和团队能更好地控制 AI 的行为，配置能力得到了极大增强。

- **Copilot Memory (记忆)**: AI 现在可以跨会话“记住”你的偏好。比如你告诉它“我喜欢用箭头函数”，它会存入 Memory，下次新建会话时依然记得。
- **`/init` 命令**: 自动扫描你的项目结构，生成一份 copilot-instructions.md 或 `AGENTS.md`，帮你的项目快速建立 AI 规范。
- **Agent Skills**: 类似于给 AI 安装“技能包”。你可以将特定的领域知识（如“公司内部 API 规范”）打包成 Skill，AI 在涉及相关话题时会自动调用。

### 总结与建议

VS Code 1.109 代表了 IDE 的未来形态——**“AI Native”**。

- **如果你是前端/全栈**: 务必尝试 **Integrated Browser** 和 **Mermaid** 图表功能。
- **如果你是重度 Copilot 用户**: 建议立刻启用 **Thinking Tokens** 和 **Copilot Memory**，并尝试使用 **`/plan`** 来处理复杂需求。
- **如果你注重安全**: 在 macOS/Linux 上开启 **Terminal Sandboxing** 是个明智的选择。

这不仅是一次版本更新，更是开发范式从“人写代码”向“人机协作、AI 辅助决策”转变的重要一步。

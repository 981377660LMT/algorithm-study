---
title: 语言的通用协议 (LSP)
date: 2016/06/27
url: https://code.visualstudio.com/blogs/2016/06/27/common-language-protocol
---

## 深入分析

语言服务器协议 (LSP) 是 VS Code 团队对开源社区最伟大的技术贡献之一，它彻底解决了“语言支持 $M \times N$ 爆炸”的难题。

1.  **分层解耦的思想**：
    - 在 LSP 出现之前，如果你想让 $M$ 个编辑器支持 $N$ 种语言，需要开发 $M \times N$ 个插件。
    - **LSP 模型**：通过标准化的 JSON-RPC 协议，实现了编辑器（Client）与语言分析工具（Server）的解耦。支持一种新语言只需开发一个 Server，即可在所有支持 LSP 的编辑器中使用。
2.  **工程价值**：
    - **多语言兼容**：语言服务器可以用任何语言编写（如 Rust, Go, Python），无需受限于编辑器的运行时环境（Node.js）。
    - **性能隔离**：繁重的语义分析在独立的进程中运行，不会阻塞编辑器的 UI 线程。
3.  **行业影响力**：
    - 微软、Red Hat 和 Codenvy 的联合推动，使 LSP 迅速成为行业标准。这意味着 VS Code 不再试图垄断生态，而是通过开放协议赢得了全行业的配合，从而实现了对海量语言的“降维打击”式支持。

---

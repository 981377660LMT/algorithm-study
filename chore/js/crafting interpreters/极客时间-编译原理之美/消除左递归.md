**消除左递归问题的方法**

左递归会导致递归下降解析器陷入无限递归，因此在构建解析器前需要消除文法中的左递归。左递归分为**直接左递归**和**间接左递归**，下面分别介绍如何消除它们。

---

### 一、消除直接左递归

**形式：**

对于直接左递归的产生式：

```
A → Aα | β
```

其中，`A` 是非终结符，`α` 和 `β` 是任意符号串，且 `β` 不以 `A` 开头。

**消除方法：**

将其转换为：

```
A → βA'
A' → αA' | ε
```

`A'` 是新的非终结符，`ε` 表示空串。

**示例：**

消除以下产生式的左递归：

```
Expr → Expr + Term | Term (例如：2 + 3 * 4)
```

**步骤：**

1. 识别左递归形式 `Expr → Expr + Term`。

2. 重写产生式：

   ```
   Expr → Term Expr'
   Expr' → + Term Expr' | ε
   ```

---

### 二、消除间接左递归

**形式：**

间接左递归涉及多个非终结符的循环定义，例如：

```
A → Bα
B → Aβ
```

**消除方法：**

1. **按顺序重写非终结符：**

   将非终结符按顺序排列为 `A1, A2, ..., An`。

2. **替换产生式以消除间接左递归：**

   对于每个 `Ai`，对所有 `Aj (j < i)` 执行替换，使得产生式不再以 `Aj` 开头。

3. **消除直接左递归：**

   对修改后的产生式，使用上述方法消除直接左递归。

**示例：**

消除以下产生式的左递归：

```
S → A a | b
A → S c | d
```

**步骤：**

1. **替换 `A` 的产生式：**

   将 `S` 的产生式代入到 `A` 中：

   ```
   A → (A a | b) c | d
   ```

   展开后得到：

   ```
   A → A a c | b c | d
   ```

2. **消除 `A` 的直接左递归：**

   ```
   A → b c A' | d A'
   A' → a c A' | ε
   ```

---

### 三、注意事项

- **确保消除所有左递归：** 处理完直接左递归后，需再次检查是否存在新的左递归。
- **保持文法等价性：** 消除左递归后的文法应与原始文法产生相同的语言。

---

通过上述方法，我们可以系统地消除文法中的左递归，为构建递归下降解析器等打下基础。

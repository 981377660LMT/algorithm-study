1. IP 在 TCP/IP 参考模型中处于第三层，也就是⽹络层。
   ⽹络层的主要作⽤是：实现主机与主机之间的通信，也叫点对点（end to end）通信。
2. ⽹络层与数据链路层有什么关系呢？
   IP 的作⽤是主机之间通信⽤的，⽽ MAC 的作⽤则是实现「直连」的两个设备
   之间通信，⽽ IP 则负责在「没有直连」的两个⽹络之间进⾏通信传输。
   源 IP 地址和⽬标 IP 地址在传输过程中是不会变化的，只有源 MAC 地址和⽬标
   MAC ⼀直在变化。
3. 在 TCP/IP ⽹络通信时，为了保证能正常通信，**每个设备都需要配置正确的 IP 地址，**否则⽆法实现正常的通信。
   实际上，IP 地址并不是根据主机台数来配置的，⽽是以⽹卡。像服务器、路由器等设备都是有 2 个以上的⽹卡，也就是它们会有 2 个以上的 IP 地址。
   `2**32=43亿`
4. 互联⽹诞⽣之初，IP 地址显得很充裕，于是计算机科学家们设计了分类地址。
   IP 地址分类成了 5 种类型，分别是 A 类、B 类、C 类、D 类、E 类。
   其中对于 A、B、C 类主要分为两个部分，分别是⽹络号和主机号。
   - 最⼤主机个数，就是要看主机号的位数，如 C 类地址的主机号占 8 位，那么 C 类地址的最⼤主机个数：
     `2^8-2=254`
     为什么要减 2 呢？
     因为在 IP 地址中，有两个 IP 是特殊的，分别是主机号全为 1 和 全为 0 地址。
     主机号全为 1 指定某个⽹络下的所有主机，⽤于⼴播(⼴播地址⽤于在同⼀个链路中相互连接的主机之间发送数据包。),即可以联系到所有主机
     主机号全为 0 指定某个⽹络
5. ⽆分类地址 CIDR
   32 ⽐特的 IP 地址被划分为两部分，前⾯是⽹络号，后⾯是主机号。
   表示形式 a.b.c.d/x ，其中 /x 表示前 x 位属于⽹络号， x 的范围是 0 ~ 32 ，这就使得 IP 地址更加具有灵活 性。
   ⽐如 10.100.122.2/24，这种地址表示形式就是 CIDR，/24 **表示前 24 位是⽹络号，**剩余的 8 位是主机号。
   还有另⼀种划分⽹络号与主机号形式，那就是⼦⽹掩码，掩码的意思就是掩盖掉主机号，剩余的就是⽹络号。
   **将⼦⽹掩码和 IP 地址按位计算 AND，就可得到⽹络号。**
   A 类 网络号 8bit，第一位固定为 0
   B 类 网络号 16bit，前两位固定为 10
   C 类 网络号 24bit，前三位固定为 110
6. 路由表包含什么？
   1. 网络 ID（Network ID, Network number）：就是目标地址的网络 ID。
   2. 子网掩码（subnet mask）：用来判断 IP 所属网络
   3. 下一跳地址/接口（Next hop / interface）：就是数据在发送到目标地址的旅途中下一站的地址。
7. IPv4 地址⻓度共 32 位，是以每 8 位作为⼀组，并⽤点分⼗进制的表示⽅式。
   IPv6 地址⻓度是 128 位，是以每 16 位作为⼀组，每组⽤冒号 「:」 隔开。
8. IP 协议相关技术
   DNS 域名解析
   ARP 与 RARP 协议
   DHCP 动态获取 IP 地址
   NAT ⽹络地址转换
   ICMP 互联⽹控制报⽂协议(ping)

9. 域名解析的⼯作流程
10. 浏览器⾸先看⼀下⾃⼰的**缓存**⾥有没有，如果没有就向操作系统的缓存要.
11. 还没有就检查本机域名解析⽂件 **hosts** ，如果还是没有，就会 DNS 服务器进⾏查询.
12. 客户端⾸先会发出⼀个 DNS 请求，问 www.server.com 的 IP 是啥，并发给**本地 DNS 服务器**（也就是客户端的 TCP/IP 设置中填写的 DNS 服务器地址）。 (比如 8.8.8.8 是 Google 提供的免费 DNS 服务器的 IP 地址 )
13. 如果没有，本地 DNS 会去问它的**根**域名服务器
14. 根 DNS 收到来⾃本地 DNS 的请求后，发现后置是 .com，说：“www.server.com 这个域名归 .com 区域管理”，我给你 .com **顶级域名服务器**地址给你，你去问问它吧。”
15. 顶级域名服务器说：“我给你负责 www.server.com 区域的**权威 DNS 服务器**的地址，你去问它应该能问到”。
16. 权威 DNS 服务器查询后将对应的 IP 地址 X.X.X.X 告诉本地 DNS
17. 本地 DNS 再将 IP 地址返回客户端，客户端和⽬标建⽴连接。
    即：**浏览器=>缓存=>hosts=>本地 DNS 服务器=>根域名服务器=>顶级域名服务器=>权威域名服务器=>本地 DNS 服务器=>浏览器**
    DNS 域名解析的过程蛮有意思的，整个过程就和我们⽇常⽣活中找⼈问路的过程类似，只指路不带路。
18. ARP(地址解析协议)
    在传输⼀个 IP 数据报的时候，确定了源 IP 地址和⽬标 IP 地址后，就会通过主机「路由表」确定 IP 数据包下⼀跳。然⽽，⽹络层的下⼀层是数据链路层，**所以我们还要知道「下⼀跳」的 MAC 地址。**
    由于主机的路由表中可以找到下⼀跳的 IP 地址，所以可以**通过 ARP 协议，求得下⼀跳的 MAC 地址。**
    那么 ARP ⼜是如何知道对⽅ MAC 地址的呢？
    简单地说，ARP 是**借助 ARP 请求与 ARP 响应**两种类型的包确定 MAC 地址的。
    **主机会通过⼴播发送 ARP 请求**，这个包中包含了想要知道的 MAC 地址的主机 IP 地址。
    当同个链路中的所有设备收到 ARP 请求时，会去拆开 ARP 请求包⾥的内容，**如果 ARP 请求包中的⽬标 IP 地址与⾃⼰的 IP 地址⼀致，那么这个设备就将⾃⼰的 MAC 地址塞⼊ ARP 响应包返回给主机。**

    RARP 协议你知道是什么吗？
    **ARP 协议是已知 IP 地址求 MAC 地址，那 RARP 协议正好相反，它是已知 MAC 地址求 IP 地址**。例如将打印机服务器等⼩型嵌⼊式设备接⼊到⽹络时就经常会⽤得到。

19. DHCP(动态主机配置协议)
    DHCP 交互中，全程都是使⽤ UDP ⼴播通信。
20. NAT(⽹络地址转换)
    缓解了 IPv4 地址耗尽的问题。
    NAT 就是同个公司、家庭、教室内的主机对外部通信时，把私有 IP 地址转换成公有 IP 地址。
21. ICMP(互联⽹控制报⽂协议)
    确认 IP 包是否成功送达⽬标地址、报告发送过程中 IP 包被废弃的原因和改善⽹络设置等。
22. ping 的⼯作原理
    ICMP 报⽂是封装在 IP 包⾥⾯，它⼯作在⽹络层，是 IP 协议的助⼿。
23. 端口：
    ssh 22
    DNS 53
    HTTP 80
    HTTPS 443

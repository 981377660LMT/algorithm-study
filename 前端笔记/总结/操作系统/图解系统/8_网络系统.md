1. Linux 系统是如何收发网络包的？
   Linux 网络协议栈就是按照了 TCP/IP 四层模型来实现的。

   TCP/IP 模型主要分为应用层、传输层、网络层、网络接口层四层，每一层负责的职责都不同，这也是 Linux 网络协议栈主要构成部分。

   当应用程序通过 Socket 接口发送数据包，**数据包会被网络协议栈从上到下进行逐层处理后，才会被送到网卡队列中，随后由网卡将网络包发送出去。**

   而在接收网络包时，同样也要先经过网络协议栈从下到上的逐层处理，最后才会被送到应用程序。

2. Reactor 和 Proactor
   Reactor 翻译过来的意思是「反应堆」;这里的反应指的是「对事件反应」，也就是来了一个事件，Reactor 就有相对应的反应/响应。
   事实上，**Reactor 模式也叫 Dispatcher 模式**，我觉得这个名字更贴合该模式的含义，即 I/O 多路复用监听事件，**收到事件后，根据事件类型分配（Dispatch）给某个进程 / 线程。**

   Reactor 模式主要由 **Reactor** 和**处理资源池**这两个核心部分组成，它俩负责的事情如下：

   Reactor 负责监听和分发事件，事件类型包含连接事件、读写事件；
   处理资源池负责处理事件，如 read -> 业务逻辑 -> send；
   Nginx 则采用了类似于 「多 Reactor 多进程」的方案。

   前面提到的 Reactor 是非阻塞同步网络模式，而 Proactor 是**异步网络模式。**

3. 我们又该用什么指标来衡量 Linux 的网络性能呢？以及如何分析网络问题呢？
   通常是以 4 个指标来衡量网络的性能，分别是**带宽**、**延时**、**吞吐率**、**PPS**（Packet Per Second）

**带宽**，表示**链路的最大传输速率**，单位是 b/s （比特 / 秒），带宽越大，其传输能力就越强。

**延时**，表示请求数据包发送后，收到对端响应，所需要的时间延迟。不同的场景有着不同的含义，比如可以表示建立 TCP 连接所需的时间延迟，或一个数据包往返所需的时间延迟。

**吞吐率**，表示单位时间内成功传输的数据量，单位是 b/s（比特 / 秒）或者 B/s（字节 / 秒），吞吐受带宽限制，带宽越大，吞吐率的上限才可能越高。

**PPS**，全称是 Packet Per Second（包 / 秒），表示以网络包为单位的传输速率，一般用来评估系统对于网络的转发能力。

4. 如何提高程序性能？

- I/O 优化：零拷贝技术(文件数据直接从内核发送出去，无需再拷贝到应用程序缓冲区，白白浪费资源。)
- I/O 优化：多路复用技术（epoll)
- 线程池技术
- 无锁编程技术
- 进程间通信技术
- RPC && 序列化技术
- 数据库索引技术
- 缓存技术 && 布隆过滤器
- 全文搜索技术
- 负载均衡技术

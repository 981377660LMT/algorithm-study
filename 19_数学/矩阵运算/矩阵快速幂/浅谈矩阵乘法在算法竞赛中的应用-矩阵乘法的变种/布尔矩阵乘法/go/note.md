### Transitive Closure (传递闭包)

**定义**：
一个有向图 `G` 的传递闭包是一个新的图 `G*`，它拥有和 `G` 相同的顶点。在 `G*` 中，如果从顶点 `u` 到顶点 `v` 在原图 `G` 中存在一条或多条边的路径，那么在 `G*` 中就存在一条从 `u` 到 `v` 的直接边 `(u, v)`。

**通俗解释**：
传递闭包回答了图上任意两点之间的**可达性问题**。它将所有间接的连接（路径）都变成了直接的连接（边）。

**计算方法**：

- **Floyd-Warshall 算法**：一个经典算法，可以在 `O(V^3)` 时间内计算所有顶点对之间的可达性。
- **多次 BFS/DFS**：从每个顶点 `v` 出发，运行一次广度优先搜索（BFS）或深度优先搜索（DFS），找出所有 `v` 能到达的顶点。总时间复杂度为 `O(V * (V+E))`。
- **布尔矩阵乘法**：如果 `A` 是图的邻接矩阵（`A[i][j] = 1` 表示有边 `(i, j)`），那么 `A^k` 的 `(i, j)` 位置为 `1` 表示从 `i` 到 `j` 存在长度为 `k` 的路径。传递闭包可以通过计算 `A + A^2 + ... + A^n` (这里的加法是逻辑或)得到。通过矩阵快速幂（也叫“重复平方法”）可以优化这个过程。

---

### Transitive Reduction (传递规约)

**定义**：
一个有向图 `G` 的传递规约是一个新的图 `G_red`，它拥有和 `G` 相同的顶点和**最少的边**，但保持与 `G` 完全相同的可达性关系。

**通俗解释**：
传递规约是传递闭包的逆操作。它通过移除所有“冗余”的边来找到图的“骨架”。一条边 `(u, v)` 如果是冗余的，意味着即使没有这条直接边，也存在另一条从 `u` 到 `v` 的路径（例如 `u -> w -> v`）。

**特性**：

- 对于**有向无环图 (DAG)**，传递规约是唯一的，并且是原图的子图。它移除了所有可以被更长路径替代的“快捷方式”边。
- 对于**有环图**，情况更复杂。传递规约可能不是唯一的，也可能不是原图的子图。

**计算方法 (以 DAG 为例)**：
对于 DAG 中的每一条边 `(u, v)`，检查是否存在一条从 `u` 到 `v` 且长度大于 1 的路径。如果存在，则边 `(u, v)` 是冗余的，可以从规约图中移除。这可以通过在移除了边 `(u, v)` 的图上做一次从 `u` 开始的搜索（BFS/DFS）来看是否还能到达 `v` 来判断。

### 总结

| 特性     | Transitive Closure (传递闭包)                   | Transitive Reduction (传递规约)                             |
| :------- | :---------------------------------------------- | :---------------------------------------------------------- |
| **目标** | 添加边，明确所有可达关系                        | 移除边，保留最基本的可达关系                                |
| **操作** | `u -> ... -> v` 存在路径 => 添加直接边 `(u, v)` | `u -> v` 存在，且 `u -> ... -> v` 也存在 => 移除边 `(u, v)` |
| **结果** | 一个更稠密的图                                  | 一个更稀疏的图（骨架）                                      |
| **关系** | 互为逆操作（主要针对 DAG）                      | 互为逆操作（主要针对 DAG）                                  |

1. 代码中最基本的概念是变量和值，而存放它们的地方是内存，所以我们就从内存开始。
2. 刚才提到字符串的内容在堆上，而指向字符串的指针等信息在栈上，现在就是检验你内存基础知识是否扎实的时候了：**数据什么时候可以放在栈上，什么时候需要放在堆上呢？**

- 栈(静)
  `编译器`得知道要用到哪些寄存器、栈上要放哪些局部变量，而这些都要在编译时确定。`所以编译器就需要明确每个局部变量的大小，以便于预留空间。`
  **在编译时，一切无法确定大小或者大小可以改变的数据，都无法安全地放在栈上，最好放在堆上。**(可变长参数?)
- 堆(动)
  当我们需要`动态大小`的内存时，只能使用堆。
  malloc申请内存。
  除了动态大小的内存需要被分配到堆上外，`动态生命周期`的内存也需要分配到堆上。
  - 放堆上的问题
  1. 内存泄漏：堆上分配的内存忘记释放。
  2. 堆越界(heap out of bounds)：访问了堆上分配的内存之外的区域。第一大内存安全。野指针。
  3. 使用后释放(use after free)：使用了已经释放的内存。第二大内存安全。悬垂指针。
  - 解决方案
    GC
    但是，GC 释放内存的时机是不确定的，释放时引发的 STW（Stop The World），也会导致代码执行的延迟（latency）不确定。
    所以一般携带 GC 的编程语言，不适于做嵌入式系统或者实时系统。

# 珂朵莉树维护区间 + 区间定期暴力重构(没有区间推平操作，只能隔一段时间暴力推平一次)

可以推广到如下类型的题目：

---

### 适用场景

1. **区间赋值/区间加/区间同质操作**

   - 题目支持对区间整体赋值、加法、乘法等操作，且每次操作后区间内的元素“同质化”（即同一段内元素值相同或有统一的增量）。
   - 例如：区间加、区间赋值、区间取 min/max、区间乘法等。

2. **需要支持区间分裂与合并**

   - 查询或修改时，常常需要把区间在某些点分裂成多个段，然后对每个段分别处理。
   - 例如：区间加法后，区间结构会变碎，需要分裂和合并。

3. **查询与位置相关**

   - 题目要求查询某个值的最左/最右出现位置、区间内某种统计、区间内某种极值等。
   - 例如：查询某个值的最左/最右下标、区间内最大/最小值、区间内某个值的出现次数等。

4. **数据范围大，操作次数较少，时限宽松**
   - 数组长度大（如 1e5~1e6），但操作次数不是极多（如 1e4~1e5），且时限较宽松（如 2s~10s）。
   - 允许偶尔暴力重构（如每 500~1000 次操作重构一次）。

---

### 典型题型举例

- 区间加/区间赋值 + 单点/区间查询（如最值、计数、位置）
- 维护区间同值段（如“珂朵莉树”经典题型）
- 需要支持区间分裂、合并、暴力重构的题目
- 需要动态维护区间信息且线段树难以支持的复杂查询

---

### 不能直接用的场景

- 需要频繁的区间推平（如区间最小值/最大值/区间和的动态维护，且每次都要精确到每个元素）
- 操作次数极多，重构成本无法摊销
- 查询/修改不是以区间为单位，而是大量随机单点操作

---

### 总结

**只要题目满足：**

- 区间操作后能用“段”来描述（如同增量段、同值段）
- 查询/修改可以通过遍历段来高效完成
- 可以容忍偶尔暴力重构

**就可以考虑用 ODT/珂朵莉树 + 定期暴力重构的方式来做。**

---

**常见题目标签：**

- 区间加、区间赋值、区间分裂、区间合并、区间极值、区间计数、区间同值段、动态区间统计等。

---

**感觉只要能快速 rebuild 就都能这样做**

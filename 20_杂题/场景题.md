https://www.nowcoder.com/discuss/428774?type=all&order=recall&pos=&page=2&ncTraceId=&channel=-1&source_id=search_all_nctrack

1. 设计一个微信发红包的 api，你会怎么设计，不能有人领到的红包里面没钱，红包数值精确到分。

2. 谁关注了我，我关注了谁，谁与我互相关注。表该如何设计，索引怎么建。查询语句怎么写
   粉丝关注表使用四列，主键 id，userId，fansId，是否互相关注。用两行数据来保存互相的关注关系，这样查询起来更方便，用空间换时间。
   主键有主键索引，剩下的字段不适合建索引，因为字段重复太多。
3. 分布式多个机器生成 id，如何保证不重复?
   snowflake 方案
   用 Redis 生成 ID

4. 有一个 IP 地址库，假设有几十万条 ip，如何判断某个 ip 地址是否在这个库中？
   位图，将每一条 ip 对应位图中的一个位，2^32 次方(42 亿多)个数据只需要 512M 空间。可以实现 O(1)的时间搜索，O(n)的时间存储。

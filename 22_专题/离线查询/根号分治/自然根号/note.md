# 自然根号

https://ddosvoid.github.io/2020/10/18/%E6%B5%85%E8%B0%88%E6%A0%B9%E5%8F%B7%E7%AE%97%E6%B3%95/

1. **有若干非负数的和为 n，则不同的数最多有 O(sqrt(n))个**

2. 二元组自然根号：给定一个和为 n 的数组 `A[i]` 和 O(n) 个二元组`(i,j)`，每个二元组的代价为 `O(min(A[i],A[j]))`，则总代价为 `O(n*sqrt(n))`

   证明：
   令 min(A[i],A[j]) = k
   如果 k>sqrt(n)，则最多有 n/k 个这样的二元组，这一部分二元组总代价为 O(n\*sqrt(n))；
   如果 k<=sqrt(n), 则总代价为 O(n\*sqrt(n))。

- 问题 1 ：给定 n 个顶点和 m 条边，每条边都有一个颜色。之后给出 q 个询问，每个询问给出两个不同的顶点 u,v，如果仅保留颜色为 c 的边 u,v 可以连通，那么称 u,v 是 c 连通的，问总共有多少不同的颜色 c，满足 u,v 是关于 c 连通的。
  `考虑每个请求 u,v，我们要判断 u,v 在哪些颜色下保持连通.`
  `只需要考虑出现在 u,v 邻居的颜色交集中的颜色即可。`
  这里可以用启发式合并的技巧，**遍历较小的集合来算交集**。
  注意缓存每次查询的结果，这样就能保证处理的请求都是不同的顶点对。
- 问题 2：给定一棵 $n$ 个点有根树，树上每个点有一个颜色 $col_i$，现在有 $m$ 个询问，每次询问给定两个颜色 $(x,y)$，问有多少对节点 $(u,v)$ 满足 $u$ 是 $v$ 的祖先且 $u$ 的颜色是 $x$，$v$ 的颜色是 $y$

  https://ddosvoid.github.io/2021/02/04/Luogu-P5901-IOI2009-regions/
  可以**枚举颜色数较小的那种颜色**，如果其为 $u$，那么相当于查询子树中某种颜色的个数，如果其为 $v$，相当于查询树链上的某种颜色的个数，两者皆可在 $dfs$ 的时候处理

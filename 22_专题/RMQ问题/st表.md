st 表区间选择
https://zhuanlan.zhihu.com/p/105439034

1. 预处理所有长度为 2^k 的区间的最值，`2^k<=n`，`k<=logn`
2. 给定查询区间[L,R]
3. 选择最大 k 满足 `2^k<=R-L+1`，将区间分解为 [L,L+2^k-1] 和 [R-2^k+1,R],这两个区间可以覆盖[L,R]，并且长度相等

```python
!1. 给定st表的n,输出需要预处理的区间
    长为1的区间:[0,0],[1,1],...,[n-1,n-1]
    长为2的区间:[0,1],[1,2],...,[n-2,n-1]
    长为4的区间:[0,3],[1,4],...,[n-4,n-1]
    ...
    dp[i][j]表示区间[j,j+2**i-1]的贡献
    区间个数上界为n*bit_length(n)

!2. 给定每次的查询区间[L,R],输出分解成的两个区间
    k = (R-L+1).bit_length()-1
    [L,L+(1<<k)-1] 与 [R-(1<<k)+1,R] 对应 st表的dp[k][L]与dp[k][R-(1<<k)+1]
```

- st 表的 op 需要满足的条件 (SparseTable)
  1. 幂等 a+a=a
  2. 交换律 a+b=b+a
  3. 结合律 a+(b+c)=(a+b)+c
- 半群的 op 需要满足的条件 (DisjointSparseTable)
  1. 结合律 a+(b+c)=(a+b)+c

---

优化 js 的 st 表

1. 注意二维数组的大小，充分利用缓存，`需要开 dp[bit][n] 而不是 dp[n][bit]`
2. 将二维数组`压缩成一维`的方法，对于 js 优化效果明显，但是对于其他语言优化效果不大
3. 压缩成一维后还可以用 `Uint32Array` 继续优化空间和访问速度

一个 RMQ 问题的快速算法，以及区间众数 - hqztrue 的文章 - 知乎
https://zhuanlan.zhihu.com/p/79423299

启发式合并，类似并查集的按 size 合并
时间复杂度：看每个元素被合并多少次，即所在集合被合并的次数
`最多 logn `次 因为每合并一次，这个元素所在集合大小会乘以 2
因此时间复杂度 `O(nlogn)`

- 树上启发式合并
  **一般用来解决一类不带修改的子树查询问题**
  树的每个结点返回`某种数据结构`
  这个数据结构里写携带了子树的信息
  向上合并时，必须把小的数据结构合并到大的数据结构上（也就是 `启发式合并`），这样整体复杂度才是 `O(nlogn)` 的

- 树上启发式合并对于某些树上离线问题可以速度大于等于大部分算法且更易于理解和实现的算法。
  给出一棵 n 个节点以 1 为根的树，节点 u 的颜色为 cu，现在对于每个结点 r 询问 r `子树里一共出现了多少种不同的颜色`。

类似题

- 给一棵树，每个节点的权值是’a’ 到’v’ 的字母，每次询问要求在一个子树找一条路径，使该路径包含的字符排序后成为回文串
- 树的节点有颜色，一种颜色占领了一个子树，当且仅当没有其他颜色在这个子树中出现得比它多。求占领每个子树的所有颜色之和
- 给出一棵 n 个节点以 1 为根的树，节点 u 的颜色为 C[u]，现在对于每个结点 u 询问 u 子树里一共出现了多少种不同的颜色

---

update
树上启发式合并有两种

- Merge Tech (熟知的简单的一种)
- Sack DSU on Tree (复杂的一种)
  https://nyaannyaan.github.io/library/tree/dsu-on-tree.hpp

DSU ON TREE と WEIGHTED UNION HEURISTIC(マージテク)の違い

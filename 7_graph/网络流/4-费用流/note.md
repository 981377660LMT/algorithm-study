费用流问题就是要求在所有最大流之中，找到费用最大/最小的问题。

**题目一般是求最优解 最优解肯定是取到最大流时取到**

`二分图最大权匹配可用 KM 算法和 MCMF`
`最小费用流的连续最短路算法复杂度为流量*最短路算法复杂度`

## mcmf 初始化

```Python
V = 150
START, END, OFFSET = 2 * V, 2 * V + 1, V
mcmf = MinCostMaxFlow(2 * v + 2, START, END)
```

ps:
匈牙利算法 => 最大流
KM 算法 => 最小费用最大流

## 例题

1. https://kmjp.hatenablog.jp/entry/2013/10/03/1000
   网格鞋子配对问题
   `N*M`のマス目に、`N*M/2`種類の靴が 2 個ずつ置いてある。
   この状態で、各靴のペアが隣接マスに来るようにするための位置を動かさないといけない靴の数の最小値を答えよ。

   虚拟源点连接所有(i+j)为偶数的点
   所有偶数的点连接周围的点,如果是同类点,则费用为 0,否则为 1
   虚拟汇点连接所有(i+j)为奇数的点

2. https://blog.hamayanhamayan.com/entry/2018/06/24/180506
   给定一个数组,每次操作可以对数组中的一个数进行加一或者减一,问最少需要多少次操作可以使得数组中任意两个数的乘积不为完全平方数

   - 令 nsq(x)表示从 x 的素因子里去除完全平方数后剩下的部分,
     那么两个数的乘积不为完全平方数的充要条件是 nsq(a) != nsq(b)

   - 虚拟源点连接所有的数,费用为 0,容量为 1
     所有的数连接虚 nsq(x),费用为差值,容量为 1
     所有的 nsq(x) 连接虚拟汇点,费用为 0,容量为 1

https://ac-mikoto.top/2022/03/21/SPFA%E7%AE%97%E6%B3%95%E4%B9%8BSLF%E4%BC%98%E5%8C%96/

1. 求不等式组**可行解**
   三步：

   1. **不等式 xi - xj >= c 转化为 `边j 到 i 权值为 c`**
   2. 找一个超级源点，源点需要满足的条件：从源点出发，一定可以走到`所有的边`
   3. 从源点 start 求单源最短路
      `存在负环 <=> 不等式组无解`
      `不存在负环 <=> dist[i]就是原不等式的一个可行解`

   ```py
   #  x0 - x1 >= 1    x0 - x1 >= 1
   #  x2 - x3 <= 2    x3 - x2 >= -2
   #  x0 = x2         x2 - x0 >= 0  x0 - x2 >= 0
   #  xi >= 1         引入超级源点 xn+1，xi - xn+1 >= 1
   ```

2. 求不等式组每个变量的**最优解**
   此时必然会有类似 x >= 0 的绝对关系
   求区间最多包含多少 => 最短路
   求区间最少包含多少 => 最长路
   **如何处理 x>=c 或者 x<=c 的关系呢?**
   建立一个超级源点 x0，点值为 0 ,让 x<=x0 + c 即可

   对于一个来说，一定存在一系列的链式关系，
   通过不断放缩`得到一个最终和超级源点相关的不等式`，如下
   ![](image/note/1646737682891.png)
   `每一个`不等式链都可以对应到从 0 号点出发走到 i 号点的一个路径，
   而求上界的最小值，即等价于求图中的最短路。

总结：
求不等式组的可行解，要找到一个超级源点，使得该源点一定可以遍历到所有边，然后从源点求单源最短路，如果存在负环，则原不等式组一定无解，如果没有负环，从源点到每个点的最短距离即为可行解；
如果是求最值问题，如果求最小值，对应图中求最长路，如果求最大值问题，对应在图中求最短路。

- spfa 优化

1. 酸辣粉优化：队列不为空，且当前元素距离小于队头，则加入队头，否则加入队尾
2. 把队列换成栈(`即 append 改为 appendleft`) 注意 deque 好像比一般的数组快 不要把 deque 换成 普通数组 stack
3. dijk 优化:把 SPFA 的双端队列换成优先级队列，时间更早的节点先出
   `LCP 32. 批量处理任务-栈优化的spfa`
4. 换别的语言

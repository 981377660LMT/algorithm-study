## 简介

SPFA(Shortest Path Faster Algorithm)算法是求单源最短路径的一种算法，
它是 Bellman-ford 的队列优化，它是一种十分高效的最短路算法。

很多时候，给定的图存在`负权边`，这时类似 Dijkstra 等算法便没有了用武之地，
而 Bellman-Ford 算法的复杂度又过高，SPFA 算法便派上用场了。
SPFA 是 Bellman-Ford 的`常数优化`，是一种剪枝，没有改变复杂度。

但是，SPFA 算法稳定性较差，在稠密图中 SPFA 算法时间复杂度会退化。

## 使用场景

spfa 可用于`最小费最大流` `差分约束` `带负数权的最短路` 问题

## 思路

Bellman-ford 的算法很好理解，实现也不难，但是它有一个缺点就是复杂度很高。
我们前面说了一共需要 V-1 轮松弛，每一轮松弛我们都需要遍历 E 条边，所以整体的复杂度是 ￼，E 指的是边的数量。
想想看，假设对于一个有 1w 个顶点，10w 条边的图来说，这个算法是显然无法得出结果的。
所以为了提高算法的可用性，我们必须对这个算法进行优化。
我们来分析一下复杂度巨大的原因，主要在两个地方，一个地方是我们松弛了 V-1 次，
另外一个地方是我们枚举了所有的边。松弛 V-1 次是不可避免的，
因为可能存在极端的情况需要 V-1 次松弛才可以达成。
`但我们每次都枚举了所有的边感觉有点浪费，因为其中大部分的边是不可能达成新的松弛的。`

那有没有办法我们筛选出来可能构成新的松弛的边呢？
SPFA 的核心原理和 Bellman-ford 算法是一样的，也是对点的松弛。只不过它优化了复杂度，优化的方法也很简单，`用一个队列维护了可能存在新的松弛的点。这样我们每次从这些点出发去寻找其他可以松弛的点加入队列，这里面的原理很简单，只有被松弛过的点才有可能去松弛其他的点。`

## 区分

1. 没有负权：dijk
2. 有负权 卡 spfa：写 spfa 最坏也是一个 bellman-ford
3. 随机图：spfa 飞快

---

- !酸辣粉优化
  https://blog.csdn.net/zhouchangyu1221/article/details/90549195
  SLF(Small Label First) 优化
  将原队列改成双端队列，对要加入队列的点 p，如果 dist[p] 小于队头元素 u 的 dist[u]，将其插入到队头，否则插入到队尾。
  SLF(Small Label First) 双端队列优化，也被戏称为“酸辣粉优化”
  SLF 优化（酸辣粉优化），可以一定程度上（约 20%）改善 spfa 的运行速度
